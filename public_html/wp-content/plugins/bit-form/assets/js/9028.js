"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9028],{97957:(e,l,t)=>{t.d(l,{Jd:()=>o,Pd:()=>c,Rx:()=>r,gn:()=>d});var a=t(87462),i=t(80160),s=t(35637),n=t(39492),r=function(e,l,t,i){var s=(0,a.Z)({},l),n=e.target.name;""!==e.target.value?s[n]=e.target.value:delete s[n],t((0,a.Z)({},s))},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.elasticEmailField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},d=function(e){var l=null==e?void 0:e.elasticEmailFields.filter((function(e){return!0===e.required}));return l.length>0?l.map((function(e){return{formField:"",elasticEmailField:e.key}})):[{formField:"",elasticEmailField:""}]},o=function(e,l,t){t(!0);var r={apiKey:e.api_key},c=(0,n.Z)(r,"bitforms_get_all_lists").then((function(i){if(i&&i.success){var s=(0,a.Z)({},e);return s.default||(s.default={}),i.data.lists&&(s.default.lists=i.data.lists),l((0,a.Z)({},s)),t(!1),"List refreshed successfully"}return t(!1),"List refresh failed. please try again"}));i.ZP.promise(c,{success:function(e){return e},error:(0,s.__)("Error Occurred","bitform"),loading:(0,s.__)("Loading Lists...")})}},90452:(e,l,t)=>{t.d(l,{Z:()=>x});var a=t(87462),i=t(67294),s=t(97707),n=t(35637),r=t(97957),c=function(e,l,t){var i=(0,a.Z)({},l);i.field_map.splice(e,0,{}),t((0,a.Z)({},i))},d=function(e,l,t,i){var s=(0,a.Z)({},t);s.field_map[l][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[l].customValue=""),i((0,a.Z)({},s))},o=t(2804),u=t(88530),m=t(80410),f=t(54017),p=t(85893);function b(e){var l,t=e.i,i=e.formFields,s=e.field,b=e.elasticEmailConf,h=e.setElasticEmailConf;if(1===(null==b||null==(l=b.field_map)?void 0:l.length)&&""===s.elasticEmailField){var v=(0,a.Z)({},b),_=(0,r.gn)(v);v.field_map=_,h(v)}var x=(null==b?void 0:b.elasticEmailFields.filter((function(e){return!0===e.required})))||[],g=(null==b?void 0:b.elasticEmailFields.filter((function(e){return!1===e.required})))||[],j=(0,o.sJ)(f.hi).isPro;return(0,p.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,p.jsxs)("div",{className:"pos-rel flx",children:[(0,p.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,p.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:function(e){return d(e,t,b,h)},children:[(0,p.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,p.jsx)("optgroup",{label:"Form Fields",children:null==i?void 0:i.map((function(e){return(0,p.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,p.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,p.jsx)("optgroup",{label:"General Smart Codes "+(j?"":"(PRO)"),children:j&&(null==m.C?void 0:m.C.map((function(e){return(0,p.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===s.formField&&(0,p.jsx)(u.Z,{onChange:function(e){return function(e,l,t,i){var s=(0,a.Z)({},t);s.field_map[l].customValue=e.target.value,i((0,a.Z)({},s))}(e,t,b,h)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:s.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,p.jsxs)("select",{className:"btcd-paper-inp",disabled:t<x.length,name:"elasticEmailField",value:t<x.length?x[t].label||"":s.elasticEmailField||"",onChange:function(e){return d(e,t,b,h)},children:[(0,p.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),t<x.length?(0,p.jsx)("option",{value:x[t].key,children:x[t].label},x[t].key):g.map((function(e){var l=e.key,t=e.label;return(0,p.jsx)("option",{value:l,children:t},l)}))]})]}),t>=x.length&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:function(){return c(t,b,h)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,p.jsx)("button",{onClick:function(){return function(e,l,t){var i=(0,a.Z)({},l);i.field_map.length>1&&i.field_map.splice(e,1),t((0,a.Z)({},i))}(t,b,h)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,p.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}var h=t(34401),v=t(23921);function _(e){var l,t=e.elasticEmailConf,r=e.setElasticEmailConf,c=(e.formFields,(0,i.useState)({show:!1,action:function(){}})),d=c[0],o=c[1],u=(0,i.useState)(!1),m=u[0],f=(u[1],function(){o({show:!1})}),b=[{value:"Transactional",label:"Transactional"},{value:"Engaged",label:"Engaged"},{value:"Active",label:"Active"},{value:"Bounced",label:"Bounced"},{value:"Unsubscribed",label:"Unsubscribed"},{value:"Abuse",label:"Abuse"},{value:"Inactive",label:"Inactive"},{value:"Stale",label:"Stale"},{value:"NotConfirmed",label:"NotConfirmed"}];return(0,p.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,p.jsx)(v.Z,{checked:(null==t||null==(l=t.actions)?void 0:l.status)||!1,onChange:function(e){return function(e,l){var i,s=(0,a.Z)({},t);"status"===l&&(e.target.checked?(s.actions[l]=!0,o({show:l})):(null==(i=s.actions)||delete i[l],null==s||delete s[l])),r((0,a.Z)({},s))}(e,"status")},className:"wdt-200 mt-4 mr-2",value:"status",title:(0,n.__)("Status","bitform"),subTitle:(0,n.__)("Add Status to contact","bitform")}),(0,p.jsxs)(h.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,n.__)("Ok","bitform"),show:"status"===d.show,close:f,action:f,title:(0,n.__)("Status","bitform"),children:[(0,p.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),m?(0,p.jsx)(Loader,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,p.jsx)("div",{className:"flx flx-between mt-2",children:(0,p.jsx)(s.Z,{className:"msl-wrp-options",defaultValue:null==t?void 0:t.status,options:null==b?void 0:b.map((function(e){return{label:e.label,value:e.value.toString()}})),onChange:function(e){return function(e,l){var i=(0,a.Z)({},t);i[l]=e,r((0,a.Z)({},i))}(e,"status")},customValue:!0,singleSelect:!0})})]})]})}function x(e){var l,t=e.formFields,i=(e.handleInput,e.elasticEmailConf),d=e.setElasticEmailConf,o=e.isLoading,u=e.setIsLoading,m=e.setSnackbar;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsxs)("div",{className:"flx",children:[(0,p.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("Lists:","bitform")}),(0,p.jsx)(s.Z,{defaultValue:i.list_id,className:"btcd-paper-drpdwn w-5",options:(null==i||null==(l=i.default)?void 0:l.lists)&&i.default.lists.map((function(e){return{label:e.listName,value:e.listName.toString()}})),onChange:function(e){return function(e){var l=(0,a.Z)({},i);l.list_id=e?e.split(","):[],d((0,a.Z)({},l))}(e)}}),(0,p.jsx)("button",{onClick:function(){return(0,r.Jd)(i,d,u)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Fetch All Recipients","bitform")+"'"},type:"button",disabled:o,children:"↻"})]}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{className:"mt-5",children:(0,p.jsx)("b",{className:"wdt-100",children:(0,n.__)("Field Map","bitform")})}),(0,p.jsx)("div",{className:"btcd-hr mt-1"}),(0,p.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,n.__)("Elastic Email Fields","bitform")})})]}),i.list_id&&(null==i?void 0:i.field_map.map((function(e,l){return(0,p.jsx)(b,{i:l,field:e,elasticEmailConf:i,formFields:t,setElasticEmailConf:d,setSnackbar:m},"rp-m-"+(l+9))}))),(0,p.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,p.jsx)("button",{onClick:function(){return c(i.field_map.length,i,d)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(null==i?void 0:i.list_id)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("b",{className:"wdt-100",children:(0,n.__)("Actions","bitform")})}),(0,p.jsx)("div",{className:"btcd-hr mt-1"}),(0,p.jsx)(_,{elasticEmailConf:i,setElasticEmailConf:d,formFields:t})]})]})}},14383:(e,l,t)=>{t.d(l,{FP:()=>n,Mm:()=>i,T5:()=>r,WK:()=>s,mG:()=>d,wX:()=>c});var a=t(87462),i=(t(35637),t(39492),function(e,l,t,i,s,n,r){var c=[].concat(e);if(r)c[n]=(0,a.Z)({},e[n],i),c.push({editItegration:!0}),l([].concat(c)),s.push(t);else{var d=[].concat(c);d.push(i),d.push({newItegration:!0}),l(d),s.push(t)}}),s=function(e){var l={},t=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");t&&t.forEach((function(e){var t=e.split("=");t[1]&&(l[t[0]]=t[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(l)),window.close()},n=function(e,l,t,i,s){var n=(0,a.Z)({},l);s?i?n.relatedlists[s-1].upload_field_map.splice(e,0,{}):n.relatedlists[s-1].field_map.splice(e,0,{}):i?n.upload_field_map.splice(e,0,{}):n.field_map.splice(e,0,{}),t((0,a.Z)({},n))},r=function(e,l,t,i,s){var n=(0,a.Z)({},l);s?i?n.relatedlists[s-1].upload_field_map.length>1&&n.relatedlists[s-1].upload_field_map.splice(e,1):n.relatedlists[s-1].field_map.length>1&&n.relatedlists[s-1].field_map.splice(e,1):i?n.upload_field_map.length>1&&n.upload_field_map.splice(e,1):n.field_map.length>1&&n.field_map.splice(e,1),t((0,a.Z)({},n))},c=function(e,l,t,i,s,n){var r=(0,a.Z)({},t);n?s?r.relatedlists[n-1].upload_field_map[l][e.target.name]=e.target.value:r.relatedlists[n-1].field_map[l][e.target.name]=e.target.value:s?r.upload_field_map[l][e.target.name]=e.target.value:r.field_map[l][e.target.name]=e.target.value,"custom"===e.target.value&&(n?r.relatedlists[n-1].field_map[l].customValue="":r.field_map[l].customValue=""),i((0,a.Z)({},r))},d=function(e,l,t,i,s){var n=(0,a.Z)({},t);s?n.relatedlists[s-1].field_map[l].customValue=e.target.value:n.field_map[l].customValue=e.target.value,i((0,a.Z)({},n))}},85813:(e,l,t)=>{t.d(l,{Z:()=>s});var a=t(35637),i=t(85893);function s(e){var l=e.step,t=e.saveConfig,s=e.edit,n=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===l&&"90%",height:3===l&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},88530:(e,l,t)=>{t.d(l,{Z:()=>i});var a=t(85893);const i=function(e){var l=e.label,t=e.onChange,i=e.value,s=e.disabled,n=e.type,r=e.textarea,c=e.className;return(0,a.jsxs)("label",{className:"btcd-mt-inp "+c,children:[!r&&(0,a.jsx)("input",{type:void 0===n?"text":n,onChange:t,placeholder:" ",disabled:s,value:i}),r&&(0,a.jsx)("textarea",{type:void 0===n?"text":n,onChange:t,placeholder:" ",disabled:s,value:i}),(0,a.jsx)("span",{children:l})]})}}}]);