"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[4143],{84143:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(87462),s=a(67294),l=a(41238),n=a(39492),r=a(35637),c=a(75257),m=a(97957),o=a(85893);function d(e){var t=e.elasticEmailConf,a=e.setElasticEmailConf,d=e.step,u=e.setstep,f=e.isInfo,p=(0,s.useState)(!1),_=p[0],b=p[1],h=(0,s.useState)({name:"",api_key:""}),g=h[0],y=h[1],x=(0,s.useState)(!1),v=x[0],k=x[1],j=(0,s.useState)(!1),N=j[0],Z=j[1],I=function(e){var s=(0,i.Z)({},t),l=(0,i.Z)({},g);l[e.target.name]="",s[e.target.name]=e.target.value,y(l),a(s)};return(0,o.jsxs)("div",{className:"btcd-stp-page",style:(0,i.Z)({},{width:1===d&&900},{height:1===d&&"auto"}),children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:I,name:"name",value:t.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:f}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.name}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("API Key:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:I,name:"api_key",value:t.api_key,type:"text",placeholder:(0,r.__)("API Key...","bitform"),disabled:f}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.api_key}),(0,o.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get API Key, Please Visit","bitform")," ",(0,o.jsx)("a",{className:"btcd-link",href:"https://elasticemail.com/account#/settings/new/manage-api",target:"_blank",rel:"noreferrer",children:(0,r.__)("Elastic Email API Console","bitform")})]}),"auth"===N&&(0,o.jsxs)("div",{className:"flx mt-5",children:[(0,o.jsx)(c.Z,{size:25,clr:"#022217",className:"mr-2"}),"Checking API Key!!!"]}),v&&!_&&!N&&(0,o.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,o.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, API key is invalid"]}),!f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:function(){var e=(0,i.Z)({},t);if(e.name&&e.api_key){Z("auth");var a={api_key:e.api_key};(0,n.Z)(a,"bitforms_elasticemail_authorize").then((function(e){null!=e&&e.success&&b(!0),k(!0),Z(!1)}))}else y({name:e.name?"":(0,r.__)("Integration name cann't be empty","bitform"),api_key:e.api_key?"":(0,r.__)("API Key cann't be empty","bitform")})},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:_||N,children:[_?(0,r.__)("Authorized ✔","bitform"):(0,r.__)("Authorize","bitform"),N&&(0,o.jsx)(c.Z,{size:20,clr:"#022217",className:"ml-2"})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("button",{onClick:function(){return setTimeout((function(){document.getElementById("btcd-settings-wrp").scrollTop=0}),300),(null==t||!t.default)&&(0,m.Jd)(t,a,Z),void u(2)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!_,children:[(0,r.__)("Next","bitform"),(0,o.jsx)(l.Z,{className:"ml-1 rev-icn"})]})]})]})}},97957:(e,t,a)=>{a.d(t,{Jd:()=>o,Pd:()=>c,Rx:()=>r,gn:()=>m});var i=a(87462),s=a(80160),l=a(35637),n=a(39492),r=function(e,t,a,s){var l=(0,i.Z)({},t),n=e.target.name;""!==e.target.value?l[n]=e.target.value:delete l[n],a((0,i.Z)({},l))},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.elasticEmailField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},m=function(e){var t=null==e?void 0:e.elasticEmailFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",elasticEmailField:e.key}})):[{formField:"",elasticEmailField:""}]},o=function(e,t,a){a(!0);var r={apiKey:e.api_key},c=(0,n.Z)(r,"bitforms_get_all_lists").then((function(s){if(s&&s.success){var l=(0,i.Z)({},e);return l.default||(l.default={}),s.data.lists&&(l.default.lists=s.data.lists),t((0,i.Z)({},l)),a(!1),"List refreshed successfully"}return a(!1),"List refresh failed. please try again"}));s.ZP.promise(c,{success:function(e){return e},error:(0,l.__)("Error Occurred","bitform"),loading:(0,l.__)("Loading Lists...")})}}}]);