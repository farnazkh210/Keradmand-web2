"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6101],{92159:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(85893);function n(e){var t=e.size;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 30 30",children:[(0,a.jsx)("polyline",{className:"svg-icn",strokeWidth:"2",points:"15 3.04 15 21.21 7.5 13.61 15 21.21 22.5 13.61"}),(0,a.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M26,21.68v2.57A2.7,2.7,0,0,1,23.34,27H6.66A2.7,2.7,0,0,1,4,24.25v-2"})]})}},40523:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(85893);function n(e){var t=e.className,s=e.stroke,n=void 0===s?2:s,r=e.size,o=void 0===r?14:r;return(0,a.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 30 30",children:[(0,a.jsx)("path",{className:"svg-icn",strokeWidth:n,d:"M13.83,6.32H6.11a2.19,2.19,0,0,0-2.2,2.19v15.3A2.19,2.19,0,0,0,6.11,26H21.55a2.19,2.19,0,0,0,2.2-2.19V16.16"}),(0,a.jsx)("path",{className:"svg-icn",strokeWidth:n,d:"M22.1,4.68a2.35,2.35,0,0,1,3.31,0,2.31,2.31,0,0,1,0,3.28L14.93,18.35l-4.41,1.09,1.11-4.37Z"})]})}},23312:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(85893);function n(e){var t=e.size,s=void 0===t?15:t,n=e.stroke,r=void 0===n?2:n;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 30 30",children:[(0,a.jsx)("polyline",{className:"svg-icn",points:"4 7.68 6.44 7.68 26 7.68"}),(0,a.jsx)("path",{className:"svg-icn",strokeWidth:r,d:"M23.56,7.68V24.76a2.45,2.45,0,0,1-2.45,2.44H8.89a2.45,2.45,0,0,1-2.45-2.44V7.68m3.67,0V5.24A2.45,2.45,0,0,1,12.56,2.8h4.88a2.45,2.45,0,0,1,2.45,2.44V7.68"}),(0,a.jsx)("line",{className:"svg-icn",strokeWidth:r,x1:"12.56",y1:"13.78",x2:"12.56",y2:"21.1"}),(0,a.jsx)("line",{className:"svg-icn",strokeWidth:r,x1:"17.44",y1:"13.78",x2:"17.44",y2:"21.1"})]})}},89770:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(85893);function n(e){var t=e.className,s=e.title,n=e.action,r=e.disabled,o=e.checked;return(0,a.jsxs)("div",{className:""+t,children:[(0,a.jsx)("span",{children:s}),(0,a.jsxs)("label",{className:"btcd-label",children:[(0,a.jsxs)("div",{className:"btcd-toggle",children:[(0,a.jsx)("input",{"aria-label":s,onChange:function(e){r||n(e)},className:"btcd-toggle-state",type:"checkbox",name:"check",value:"check",checked:o}),(0,a.jsx)("div",{className:"btcd-toggle-inner",children:(0,a.jsx)("div",{className:"btcd-indicator"})}),(0,a.jsx)("div",{className:"btcd-active-bg"})]}),(0,a.jsx)("div",{className:"btcd-label-text"})]})]})}},56101:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var a=s(87462),n=s(67294),r=s(73727),o=s(2804),i=s(35637),l=s(38762),c=s(39492),d=s(52249),m=s(54017),u=s(92971),f=s(75257),h=s(85893);function b(e){var t=e.setModal,s=e.setTempModal,r=e.newFormId,i=e.setSnackbar,l=(0,o.Zl)(m.pH),b=(0,n.useState)({prop:["all","additional","confirmation","workFlows","mailTem","integrations","reports"]}),p=b[0],x=b[1],v=(0,n.useState)({formDetail:"",prop:""}),j=v[0],w=v[1],g=(0,n.useState)(!1),k=g[0],N=g[1],_=function(e){var t;j[e.target.name]&&w((0,a.Z)({},j,((t={})[e.target.name]="",t)));if("checkbox"===e.target.type){var s=p.prop;if(e.target.checked&&s.indexOf(e.target.value)<0){if("all"===e.target.value)return void x((0,a.Z)({},p,{prop:["all","additional","confirmation","workFlows","mailTem","integrations","reports"]}));s.push(e.target.value)}!e.target.checked&&s.indexOf(e.target.value)>-1&&delete s[s.indexOf(e.target.value)],(s.indexOf("additional")<0||s.indexOf("confirmation")<0||s.indexOf("workFlows")<0||s.indexOf("mailTem")<0||s.indexOf("integrations")<0||s.indexOf("reports")<0)&&delete s[s.indexOf("all")],x((0,a.Z)({},p,{prop:s}))}else{var n=e.target.files[0];if(n&&"application/json"===n.type){var r=new FileReader;r.readAsText(e.target.files[0]),r.onload=function(){y(r.result,e.target)}}else w((0,a.Z)({},j,{formDetail:"Please select an exported json file"})),e.target.value=""}},y=function(e,t){var s={};try{s=JSON.parse(e)}catch(n){w((0,a.Z)({},j,{formDetail:"Please select an exported json file"})),t.value=""}s&&s.layout&&s.fields?x((0,a.Z)({},p,{formDetail:s})):(w((0,a.Z)({},j,{formDetail:"Please select an exported json file"})),t.value="")};return(0,h.jsxs)("div",{className:"flx flx-col flx-center mt-4",children:[(0,h.jsxs)("div",{className:"fld-wrp",children:[(0,h.jsx)("input",{type:"file",accept:".json",name:"formDetail",onChange:_}),j.formDetail&&(0,h.jsx)("span",{className:"btcd-btn-o-red",children:j.formDetail})]}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"fld-wrp",children:[(0,h.jsx)("div",{className:"fld-lbl",children:"Please select property you want to import with form"}),(0,h.jsxs)("div",{className:"no-drg fld btcd-ck-con btcd-round",children:[(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"All"}),(0,h.jsx)("input",{value:"all",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("all")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]}),(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"Form Settings"}),(0,h.jsx)("input",{value:"additional",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("additional")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]}),(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"Confirmations"}),(0,h.jsx)("input",{value:"confirmation",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("confirmation")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]}),(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"Conditional Logics"}),(0,h.jsx)("input",{value:"workFlows",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("workFlows")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]}),(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"Email Templates"}),(0,h.jsx)("input",{value:"mailTem",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("mailTem")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]}),(0,h.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,h.jsx)("span",{children:"Integrations"}),(0,h.jsx)("input",{value:"integrations",type:"checkbox",defaultChecked:!0,checked:p.prop.indexOf("integrations")>=0,name:"prop",onChange:_}),(0,h.jsx)("span",{className:"btcd-mrk ck"})]})]})]}),(0,h.jsxs)("div",{className:"flx flx-between w-5",children:[(0,h.jsx)("button",{onClick:function(){return t(!1)},className:"btn round btcd-btn-lg blue blue-sh",type:"button",children:" Cancel "}),(0,h.jsxs)("button",{onClick:function(){var e,n;if(null!=(e=p.formDetail)&&e.layout&&null!=(n=p.formDetail)&&n.fields){for(var o=(0,d.p$)(p.formDetail),m=0,f=["additional","workFlows","reports"];m<f.length;m++){var h=f[m];-1===p.prop.indexOf(h)&&delete o[h]}if(o.formSettings)for(var b=0,x=["confirmation","mailTem","integrations"];b<x.length;b++){var v=x[b];-1===p.prop.indexOf(v)&&delete o.formSettings[v]}N(!0),(0,c.Z)({formDetail:o,newFormId:r},"bitforms_import_aform").then((function(e){if(e.success){var a=e.data;l((function(e){return(0,u.U)(e,{type:"add",data:{formID:a.id,status:!0,formName:a.form_name,shortcode:"bitform id='"+a.id+"'",entries:0,views:0,conversion:0,created_at:a.created_at}})})),i({show:!0,msg:a.message}),s(!1),t(!1)}else null!=e&&e.data&&i({show:!0,msg:e.data});N(!1)}))}else w((0,a.Z)({},j,{formDetail:"Please select an exported json file"}))},className:"btn round btcd-btn-lg blue blue-sh",type:"button",disabled:k,children:["Import",k&&(0,h.jsx)(f.Z,{size:20,clr:"#fff",className:"ml-2"})]})]})]})}var p=s(92159);function x(e){var t=e.setTempModal,s=e.newFormId,a=e.setSnackbar,o=(0,n.useState)(!1),c=o[0],d=o[1];return(0,h.jsxs)("div",{className:"btcd-tem-lay flx",children:[[{lbl:"Blank",img:""},{lbl:"Contact Form",img:""}].map((function(e){return(0,h.jsxs)("div",{className:"btcd-tem flx",children:[(0,h.jsx)("span",{className:"btcd-icn icn-file",style:{fontSize:90}}),(0,h.jsx)("div",{children:e.lbl}),(0,h.jsx)("div",{className:"btcd-hid-btn",children:(0,h.jsx)(r.rU,{to:"/form/builder/new/"+e.lbl+"/fs",className:"btn btn-white sh-sm",type:"button",children:(0,i.__)("Create","bitform")})})]},e.lbl)})),(0,h.jsxs)("div",{className:"btcd-tem flx",children:[(0,h.jsx)(p.Z,{size:"60"}),(0,h.jsx)("div",{children:"Form Import"}),(0,h.jsx)("div",{className:"btcd-hid-btn",children:(0,h.jsx)("button",{onClick:function(){return d(!0)},className:"btn btn-white sh-sm",type:"button",children:(0,i.__)("Import","bitform")})})]}),(0,h.jsx)(l.Z,{show:c,setModal:d,title:(0,i.__)("Import Form","bitform"),subTitle:"",children:(0,h.jsx)(b,{setModal:d,setTempModal:t,newFormId:s,setSnackbar:a})})]})}var v=s(34401),j=s(69151),w=s(52718),g=s(40523),k=s(23312);function N(e){return(0,h.jsxs)("div",{className:"btcd-menu",children:[(0,h.jsx)("button",{className:"btcd-menu-btn btcd-mnu sh-sm",onClick:function(e){e.target.parentNode.children[1].classList.contains("btcd-m-a")?(e.target.parentNode.children[1].classList.remove("btcd-m-a"),e.target.parentNode.parentNode.parentNode.style.zIndex="auto",e.target.blur()):(e.target.parentNode.parentNode.parentNode.style.zIndex=10,e.target.parentNode.children[1].classList.add("btcd-m-a"))},onBlur:function(e){var t=e.target;setTimeout((function(){t.parentNode.children[1].classList.remove("btcd-m-a"),t.parentNode.parentNode.parentNode.style.zIndex="auto"}),100)},"aria-label":"toggle menu",type:"button"}),(0,h.jsxs)("div",{className:"btcd-menu-list",children:[(0,h.jsxs)(r.rU,{to:"/form/builder/edit/"+e.formID+"/fs",type:"button",className:"flx","aria-label":"actions",children:[(0,h.jsx)(g.Z,{size:16}),"  Edit"]}),(0,h.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.dup,children:[(0,h.jsx)(w.Z,{size:26}),"  Duplicate"]}),(0,h.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.export,children:[(0,h.jsx)("span",{className:"btcd-icn icn-file_download"}),"  Export"]}),(0,h.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.del,children:[(0,h.jsx)(k.Z,{size:15}),"  Delete"]})]})]})}function _(e){var t=e.value;return(0,h.jsxs)("div",{className:"flx",style:{width:"100%"},children:[(0,h.jsxs)("span",{style:{minWidth:68},children:[t,"%"]}),(0,h.jsx)("div",{className:"btcd-prgrs-wrp",children:(0,h.jsx)("div",{className:"btcd-prgrs",style:{width:t+"%"}})})]})}var y=s(89770),C=s(35001),D=s(94735),Z=(0,n.lazy)((function(){return s.e(5543).then(s.bind(s,95543))}));function I(){var e=(0,n.useState)(!1),t=e[0],s=e[1],f=(0,n.useState)({show:!1}),b=f[0],p=f[1],w=(0,o.FV)(m.pH),g=w[0],k=w[1],I=(0,n.useState)({show:!1,btnTxt:""}),F=I[0],T=I[1],S=(0,o.sJ)(m.bt),O=(0,o.sJ)(m.hi),U=(0,n.useState)([{width:70,minWidth:60,Header:(0,i.__)("Status","bitform"),accessor:"status",Cell:function(e){return(0,h.jsx)(y.Z,{className:"flx",action:function(t){return function(e,t){var s=e.target.checked,n={id:t,status:s};k((function(e){return(0,u.U)(e,{type:"update",data:{formID:t,status:n.status}})})),(0,c.Z)(n,"bitforms_change_status").then((function(e){"success"in e&&!e.success&&(k((function(e){return(0,u.U)(e,{type:"update",data:{formID:t,status:n.status}})})),p((0,a.Z)({},{show:!0,msg:(0,i.__)("Failed to change Form Status","bitform")})))})).catch((function(){k((function(e){return(0,u.U)(e,{type:"update",data:{formID:t,status:!s}})})),p((0,a.Z)({},{show:!0,msg:(0,i.__)("Failed to change Form Status","bitform")}))}))}(t,e.row.original.formID)},checked:e.row.original.status})}},{width:250,minWidth:80,Header:(0,i.__)("Form Name","bitform"),accessor:"formName",Cell:function(e){return(0,h.jsx)(r.rU,{to:"/form/responses/edit/"+e.row.original.formID+"/",className:"btcd-tabl-lnk",children:e.row.values.formName})}},{width:220,minWidth:200,Header:(0,i.__)("Short Code","bitform"),accessor:"shortcode",Cell:function(e){return(0,h.jsx)(j.Z,{value:"["+e.row.values.shortcode+"]",className:"cpyTxt"})}},{width:80,minWidth:60,Header:(0,i.__)("Views","bitform"),accessor:"views"},{width:170,minWidth:130,Header:(0,i.__)("Completion Rate","bitform"),accessor:"conversion",Cell:function(e){return(0,h.jsx)(_,{value:(t=e.row.values.entries,s=e.row.values.views,0===t?0:(t/("0"===s?1:s)*100).toFixed(2))});var t,s}},{width:100,minWidth:60,Header:(0,i.__)("Responses","bitform"),accessor:"entries",Cell:function(e){return(0,h.jsx)(r.rU,{to:"form/responses/edit/"+e.row.original.formID,className:"btcd-tabl-lnk",children:e.row.values.entries})}},{width:160,minWidth:60,Header:(0,i.__)("Created","bitform"),accessor:"created_at",Cell:function(e){return t=e.row.original.created_at,(0,h.jsxs)("div",{style:{lineHeight:.7,fontWeight:500},children:[(0,d.CI)(t,O.dateFormat),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("small",{children:(0,d.CI)(t,O.timeFormat)})]});var t}}]),H=U[0],W=U[1];(0,n.useEffect)((function(){Object.prototype.hasOwnProperty.call({NODE_ENV:"production"},"PUBLIC_URL")&&(0,c.Z)(null,"bitforms_get_all_form").then((function(e){if(null!=e&&e.success){var t=e.data.map((function(e){return{formID:e.id,status:"0"!==e.status,formName:e.form_name,shortcode:"bitform id='"+e.id+"'",entries:e.entries,views:e.views,created_at:e.created_at}}));k((function(e){return(0,u.U)(e,{data:t,type:"set"})}))}}))}),[]),(0,n.useEffect)((function(){var e=H.filter((function(e){return"t_action"!==e.accessor}));e.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:function(e){return(0,h.jsx)(N,{formID:e.row.original.formID,newFormId:e,index:e.row.id,del:function(){return E(e.row.original.formID,e.row.index)},dup:function(){return P(e.row.original.formID)},export:function(){return B(e.row.original.formID)}})}}),W([].concat(e))}),[S]);var L=(0,n.useCallback)((function(e,t){for(var s="Enable"===e.target.innerHTML,a=[],n=[],r=0;r<t.length;r+=1)a.push(t[r].id),n.push(t[r].original.formID);for(var o=[].concat(g),i=[].concat(g),l=0;l<a.length;l+=1)i[a[l]].status=s;k((function(e){return(0,u.U)(e,{data:i,type:"set"})}));var d={formID:n,status:s};(0,c.Z)(d,"bitforms_bulk_status_change").then((function(e){void 0===e||e.success?e.success&&p({show:!0,msg:e.data}):k((function(e){return(0,u.U)(e,{data:o,type:"set"})}))}))}),[]),z=(0,n.useCallback)((function(e){for(var t=[],s=[],a=0;a<e.length;a+=1)t.push(e[a].id),s.push(e[a].original.formID);for(var n=[].concat(g),r=[].concat(g),o=t.length-1;o>=0;o-=1)r.splice(Number(t[o]),1);k((function(e){return(0,u.U)(e,{data:r,type:"set"})}));var i={formID:s};(0,c.Z)(i,"bitforms_bulk_delete_form").then((function(e){void 0!==e&&e.success?e.success&&p({show:!0,msg:e.data}):k((function(e){return(0,u.U)(e,{data:n,type:"set"})}))}))}),[]),M=(0,n.useCallback)((function(e){W(e)}),[]),A=function(){F.show=!1,T((0,a.Z)({},F))},E=function(e,t){F.action=function(){!function(e,t){(0,c.Z)({id:e},"bitforms_delete_aform").then((function(e){e.success&&(k((function(e){return(0,u.U)(e,{type:"remove",data:t})})),p({show:!0,msg:(0,i.__)("Form Deleted Successfully","bitform")}))}))}(e,t),A()},F.btnTxt=(0,i.__)("Delete","bitform"),F.btn2Txt=null,F.btnClass="",F.body=(0,i.__)("Are you sure to delete this form?","bitform"),F.show=!0,T((0,a.Z)({},F))},P=function(e){F.action=function(){!function(e){(0,c.Z)({id:e,newFormId:S},"bitforms_duplicate_aform").then((function(e){if(e.success){var t=e.data;k((function(e){return(0,u.U)(e,{type:"add",data:{formID:t.id,status:!0,formName:t.form_name,shortcode:"bitform id='"+t.id+"'",entries:0,views:0,conversion:0,created_at:t.created_at}})})),p({show:!0,msg:(0,i.__)("Form Duplicated Successfully.","bitform")})}}))}(e),A()},F.btnTxt=(0,i.__)("Duplicate","bitform"),F.btn2Txt=null,F.btnClass="blue",F.body=(0,i.__)("Are you sure to duplicate this form ?","bitform"),F.show=!0,T((0,a.Z)({},F))},B=function(e){F.action=function(){!function(e){var t=new URL(O.ajaxURL);t.searchParams.append("action","bitforms_export_aform"),t.searchParams.append("_ajax_nonce",O.nonce),t.searchParams.append("id",e),fetch(t).then((function(t){t.ok?t.blob().then((function(t){var s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="bitform_"+e+"_export.json",document.body.appendChild(a),a.click(),a.remove()})):t.json().then((function(e){e.data&&p({show:!0,msg:e.data})}))}))}(e),A()},F.btnTxt=(0,i.__)("Export","bitform"),F.btn2Txt=null,F.btnClass="blue",F.body=(0,i.__)("Are you sure to export this form ?","bitform"),F.show=!0,T((0,a.Z)({},F))};return(0,h.jsxs)("div",{id:"all-forms",children:[(0,h.jsx)(C.Z,{snack:b,setSnackbar:p}),(0,h.jsx)(v.Z,{show:F.show,body:F.body,action:F.action,close:A,btnTxt:F.btnTxt,btn2Txt:F.btn2Txt,btn2Action:F.btn2Action,btnClass:F.btnClass}),(0,h.jsx)(l.Z,{show:t,setModal:s,title:(0,i.__)("Create Form","bitform"),subTitle:"",children:(0,h.jsx)(x,{setTempModal:s,newFormId:S,setSnackbar:p})}),g.length?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"af-header flx flx-between",children:[(0,h.jsx)("h2",{children:(0,i.__)("Forms","bitform")}),(0,h.jsx)("button",{onClick:function(){return s(!0)},type:"button",className:"btn round btcd-btn-lg blue blue-sh",children:(0,i.__)("Create From","bitform")})]}),(0,h.jsx)("div",{className:"forms",children:(0,h.jsx)(D.Z,{className:"f-table btcd-all-frm",height:500,columns:H,data:g,rowSeletable:!0,newFormId:S,resizable:!0,columnHidable:!0,setBulkStatus:L,setBulkDelete:z,setTableCols:M})})]}):(0,h.jsx)(Z,{setModal:s})]})}const F=(0,n.memo)(I)}}]);