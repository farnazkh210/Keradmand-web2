"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8899],{14383:(e,t,l)=>{l.d(t,{FP:()=>s,Mm:()=>a,T5:()=>r,WK:()=>n,mG:()=>d,wX:()=>o});var i=l(87462),a=(l(35637),l(39492),function(e,t,l,a,n,s,r){var o=[].concat(e);if(r)o[s]=(0,i.Z)({},e[s],a),o.push({editItegration:!0}),t([].concat(o)),n.push(l);else{var d=[].concat(o);d.push(a),d.push({newItegration:!0}),t(d),n.push(l)}}),n=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},s=function(e,t,l,a,n){var s=(0,i.Z)({},t);n?a?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):a?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,i.Z)({},s))},r=function(e,t,l,a,n){var s=(0,i.Z)({},t);n?a?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):a?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,i.Z)({},s))},o=function(e,t,l,a,n,s){var r=(0,i.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),a((0,i.Z)({},r))},d=function(e,t,l,a,n){var s=(0,i.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,a((0,i.Z)({},s))}},85813:(e,t,l)=>{l.d(t,{Z:()=>n});var i=l(35637),a=l(85893);function n(e){var t=e.step,l=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,i.__)("Update","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},67588:(e,t,l)=>{l.d(t,{Fb:()=>c,Pd:()=>d,Rx:()=>r,gn:()=>o,tl:()=>u});var i=l(87462),a=l(80160),n=l(35637),s=l(39492),r=function(e,t,l){var a=(0,i.Z)({},t),n=e.target.name;""!==e.target.value?a[n]=e.target.value:delete a[n],l((0,i.Z)({},a))},o=function(e){var t=null==e?void 0:e.mailerLiteFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",mailerLiteFormField:e.key}})):[{formField:"",mailerLiteFormField:""}]},d=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.mailerLiteFormField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},u=function(e,t,l,r,o,d){if(e.auth_token){l({}),o(!0);var u={auth_token:e.auth_token};(0,s.Z)(u,"bitforms_mailerlite_refresh_fields").then((function(l){if(l&&l.success){var s=(0,i.Z)({},e);return l.data&&(s.mailerLiteFields=l.data),t(s),void("authorization"===d?(o(!1),r(!0),a.ZP.success((0,n.__)("Authorized successfully","bitform"))):(o(!1),a.ZP.success((0,n.__)("Fields refresh successfully","bitform"))))}"authorization"===d?(o(!1),r(!1),a.ZP.error((0,n.__)(l.data,"bitform")),a.ZP.error((0,n.__)("Authorized Failed","bitform"))):(o(!1),a.ZP.error((0,n.__)("Fields refresh failed","bitform")))}))}else l({auth_token:e.auth_token?"":(0,n.__)("Api Key can't be empty","bitform")})},c=function(e,t,l){l(!0);var r={auth_token:e.auth_token};(0,s.Z)(r,"bitforms_mailerlite_fetch_all_groups").then((function(s){if(s&&s.success){var r=(0,i.Z)({},e);return s.data&&(r.groups=s.data),t(r),l(!1),void a.ZP.success((0,n.__)("Group fetch successfully","bitform"))}l(!1),a.ZP.error((0,n.__)("Group fetch failed","bitform"))}))}},39286:(e,t,l)=>{l.d(t,{Z:()=>x});var i=l(35637),a=l(68381),n=l(87462),s=function(e,t,l){var i=(0,n.Z)({},t);i.field_map.splice(e,0,{}),l((0,n.Z)({},i))},r=function(e,t,l,i){var a=(0,n.Z)({},l);a.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(a.field_map[t].customValue=""),i((0,n.Z)({},a))},o=l(2804),d=l(88530),u=l(80410),c=l(54017),m=l(67588),f=l(85893);function p(e){var t,l=e.i,a=e.formFields,p=e.field,_=e.mailerLiteConf,b=e.setMailerLiteConf;if(1===(null==_||null==(t=_.field_map)?void 0:t.length)&&""===p.mailerLiteFormField){var h=(0,n.Z)({},_),v=(0,m.gn)(h);h.field_map=v,b(h)}var g=(null==_?void 0:_.mailerLiteFields.filter((function(e){return!0===e.required})))||[],x=(null==_?void 0:_.mailerLiteFields.filter((function(e){return!1===e.required})))||[],j=(0,o.sJ)(c.hi).isPro;return(0,f.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,f.jsxs)("div",{className:"pos-rel flx",children:[(0,f.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,f.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:p.formField||"",onChange:function(e){return r(e,l,_,b)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bit-form")}),(0,f.jsx)("optgroup",{label:"Form Fields",children:null==a?void 0:a.map((function(e){return(0,f.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,f.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bit-form")}),(0,f.jsx)("optgroup",{label:"General Smart Codes "+(j?"":"(PRO)"),children:j&&(null==u.C?void 0:u.C.map((function(e){return(0,f.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===p.formField&&(0,f.jsx)(d.Z,{onChange:function(e){return function(e,t,l,i){var a=(0,n.Z)({},l);a.field_map[t].customValue=e.target.value,i((0,n.Z)({},a))}(e,l,_,b)},label:(0,i.__)("Custom Value","bit-form"),className:"mr-2",type:"text",value:p.customValue,placeholder:(0,i.__)("Custom Value","bit-form")}),(0,f.jsxs)("select",{className:"btcd-paper-inp",disabled:l<g.length,name:"mailerLiteFormField",value:l<g?g[l].label||"":p.mailerLiteFormField||"",onChange:function(e){return r(e,l,_,b)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bit-form")}),l<g.length?(0,f.jsx)("option",{value:g[l].key,children:g[l].label},g[l].key):x.map((function(e){var t=e.key,l=e.label;return(0,f.jsx)("option",{value:t,children:l},t)}))]})]}),l>=g.length&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){return s(l,_,b)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,f.jsx)("button",{onClick:function(){return function(e,t,l){var i=(0,n.Z)({},t);i.field_map.length>1&&i.field_map.splice(e,1),l((0,n.Z)({},i))}(l,_,b)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,f.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}var _=l(67294),b=l(97707),h=l(34401),v=l(23921);l(78774);function g(e){var t,l,s,r=e.mailerLiteConf,o=e.setMailerLiteConf,d=(e.formFields,(0,_.useState)({show:!1,action:function(){}})),u=d[0],c=d[1],p=(0,_.useState)(!1),g=p[0],x=p[1],j=function(e,t){var l=(0,n.Z)({},r);"group"===t&&((0,m.Fb)(r,o,x),e.target.checked?l.actions.group=!0:delete l.actions.group,c({show:t})),"mailer_lite_type"===t&&(e.target.checked?l.actions.mailer_lite_type=!0:delete l.actions.mailer_lite_type,c({show:t})),"update"===t&&(e.target.checked?l.actions.update=!0:delete l.actions.update),"double_opt_in"===t&&(e.target.checked?l.actions.double_opt_in=!0:delete l.actions.double_opt_in),o((0,n.Z)({},l))},y=function(){c({show:!1})},F=function(e,t){var l=(0,n.Z)({},r);"group_ids"===t&&e.length?(l.actions.group=!0,l.actions.update=!0):"group_ids"===t&&e.length<1&&delete l.actions.group,"mailer_lite_type"===t&&e.length?l.actions.mailer_lite_type=!0:"mailer_lite_type"===t&&e.length<1&&delete l.actions.mailer_lite_type,l[t]=e,o((0,n.Z)({},l))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,f.jsx)(v.Z,{checked:(null==r?void 0:r.group_ids.length)||!1,onChange:function(e){return j(e,"group")},className:"wdt-200 mt-4 mr-2",value:"group",title:(0,i.__)("Groups","bitform"),subTitle:(0,i.__)("Add Groups","bitform")}),(0,f.jsx)(v.Z,{checked:(null==r?void 0:r.mailer_lite_type)||!1,onChange:function(e){return j(e,"mailer_lite_type")},className:"wdt-200 mt-4 mr-2",value:"type",title:(0,i.__)("Type","bitform"),subTitle:(0,i.__)("Add Type","bitform")}),(0,f.jsx)(v.Z,{checked:(null==(t=r.actions)?void 0:t.double_opt_in)||!1,onChange:function(e){return j(e,"double_opt_in")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,i.__)("Double Opt-in","bitform"),subTitle:(0,i.__)("Add Double Opt-in","bitform")}),(0,f.jsx)(v.Z,{checked:(null==(l=r.actions)?void 0:l.update)||!1,isInfo:null==r?void 0:r.group_ids.length,onChange:function(e){return j(e,"update")},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,i.__)("Update Subscriber","bitform"),subTitle:(0,i.__)("Update Responses with MailerLite exist Subscriber?","bitform")})]}),(0,f.jsxs)(h.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,i.__)("Ok","bitform"),show:"group"===u.show,close:y,action:y,title:(0,i.__)("Groups","bitform"),children:[(0,f.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),g?(0,f.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,f.jsxs)("div",{className:"flx flx-between mt-2",children:[(0,f.jsx)(b.Z,{className:"msl-wrp-options",defaultValue:null==r?void 0:r.group_ids,options:null==r||null==(s=r.groups)?void 0:s.map((function(e){return{label:e.name,value:e.group_id}})),onChange:function(e){return F(e,"group_ids")},customValue:!0}),(0,f.jsx)("button",{onClick:function(){return(0,m.Fb)(r,o,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":(0,i.__)("Refresh Groups","bitform")+"'"},type:"button",disabled:g,children:"↻"})]})]}),(0,f.jsxs)(h.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,i.__)("Ok","bitform"),show:"mailer_lite_type"===u.show,close:y,action:y,title:(0,i.__)("Type","bitform"),children:[(0,f.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),g?(0,f.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,f.jsx)("div",{className:"flx flx-between mt-2",children:(0,f.jsx)(b.Z,{className:"msl-wrp-options",defaultValue:null==r?void 0:r.mailer_lite_type,options:[{label:"Active",value:"active"},{label:"Unsubscribed",value:"unsubscribed"},{label:"Bounced",value:"bounced"},{label:"Spam Complaints",value:"junk"},{label:"Unconfirmed",value:"unconfirmed"}].map((function(e){return{label:e.label,value:e.value}})),onChange:function(e){return F(e,"mailer_lite_type")},customValue:!0,singleSelect:!0})})]})]})}function x(e){var t=e.formFields,l=e.mailerLiteConf,n=e.setMailerLiteConf,r=e.isLoading,o=e.setIsLoading,d=e.setSnackbar,u=(0,_.useState)(!1),c=(u[0],u[1]),b=(0,_.useState)({name:"",auth_token:""}),h=(b[0],b[1]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("div",{className:"mt-5",children:(0,f.jsxs)("b",{className:"wdt-100",children:[(0,i.__)("Field Map","bitform"),(0,f.jsx)("button",{onClick:function(){return(0,m.tl)(l,n,h,c,o,"refreshFields")},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Fields"'},type:"button",disabled:r,children:"↻"})]})}),(0,f.jsx)("br",{}),r&&(0,f.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("MailerLite Fields","bitform")})})]}),null==l?void 0:l.field_map.map((function(e,i){return(0,f.jsx)(p,{i,field:e,mailerLiteConf:l,formFields:t,setMailerLiteConf:n,setSnackbar:d},"rp-m-"+(i+9))})),(0,f.jsx)("div",{className:"txt-center btcbi-field-map-button mt-2",children:(0,f.jsx)("button",{onClick:function(){return s(l.field_map.length,l,n)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsx)(g,{mailerLiteConf:l,setMailerLiteConf:n,formFields:t})]})]})}},88530:(e,t,l)=>{l.d(t,{Z:()=>a});var i=l(85893);const a=function(e){var t=e.label,l=e.onChange,a=e.value,n=e.disabled,s=e.type,r=e.textarea,o=e.className;return(0,i.jsxs)("label",{className:"btcd-mt-inp "+o,children:[!r&&(0,i.jsx)("input",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:n,value:a}),r&&(0,i.jsx)("textarea",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:n,value:a}),(0,i.jsx)("span",{children:t})]})}}}]);