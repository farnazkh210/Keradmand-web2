"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9464],{79464:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var r=i(87462),a=i(35637),n=i(75257),o=i(61079),l=i(67588),s=i(67294),u=i(85893);function c(e){var t=e.mailerLiteConf,i=e.setMailerLiteConf,c=e.step,d=e.setstep,m=e.isLoading,f=e.setIsLoading,h=e.isInfo,b=(0,s.useState)(!1),_=b[0],p=b[1],k=(0,s.useState)({name:"",auth_token:""}),v=k[0],g=k[1],x=function(e){var a=(0,r.Z)({},t),n=(0,r.Z)({},v);n[e.target.name]="",a[e.target.name]=e.target.value,g(n),i(a)};return(0,u.jsxs)("div",{className:"btcd-stp-page",style:(0,r.Z)({},{width:1===c&&900},{height:1===c&&"auto"}),children:[(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,a.__)("Integration Name:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:t.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform"),disabled:h}),(0,u.jsxs)("small",{className:"d-blk mt-3",children:[(0,a.__)("To Get API token, Please Visit","bitform")," ",(0,u.jsx)("a",{className:"btcd-link",href:"https://dashboard.mailerlite.com/integrations/api",target:"_blank",rel:"noreferrer",children:(0,a.__)("MailerLite API Token","bitform")})]}),(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,a.__)("API Token:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"auth_token",value:t.auth_token,type:"text",placeholder:(0,a.__)("API Token...","bitform"),disabled:h}),(0,u.jsx)("div",{style:{color:"red",fontSize:"15px"},children:v.auth_token}),!h&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("button",{onClick:function(){return(0,l.tl)(t,i,g,p,f,"authorization")},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:_||m,children:[_?(0,a.__)("Authorized ✔","bitform"):(0,a.__)("Authorize","bitform"),m&&(0,u.jsx)(n.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("button",{onClick:function(){null==t||t.default,d(2),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn ml-auto btcd-btn-lg green sh-sm flx",type:"button",disabled:!_,children:[(0,a.__)("Next","bitform"),(0,u.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,u.jsx)(o.Z,{note:'\n    <h4> Step of generate API token:</h4>\n    <ul>\n      <li>Goto <a href="https://dashboard.mailerlite.com/integrations/api">Generate API Token</a></li>\n      <li>Copy the <b>Token</b> and paste into <b>API Token</b> field of your authorization form.</li>\n      <li>Finally, click <b>Authorize</b> button.</li>\n  </ul>\n  '})]})}},67588:(e,t,i)=>{i.d(t,{Fb:()=>d,Pd:()=>u,Rx:()=>l,gn:()=>s,tl:()=>c});var r=i(87462),a=i(80160),n=i(35637),o=i(39492),l=function(e,t,i){var a=(0,r.Z)({},t),n=e.target.name;""!==e.target.value?a[n]=e.target.value:delete a[n],i((0,r.Z)({},a))},s=function(e){var t=null==e?void 0:e.mailerLiteFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",mailerLiteFormField:e.key}})):[{formField:"",mailerLiteFormField:""}]},u=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.mailerLiteFormField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},c=function(e,t,i,l,s,u){if(e.auth_token){i({}),s(!0);var c={auth_token:e.auth_token};(0,o.Z)(c,"bitforms_mailerlite_refresh_fields").then((function(i){if(i&&i.success){var o=(0,r.Z)({},e);return i.data&&(o.mailerLiteFields=i.data),t(o),void("authorization"===u?(s(!1),l(!0),a.ZP.success((0,n.__)("Authorized successfully","bitform"))):(s(!1),a.ZP.success((0,n.__)("Fields refresh successfully","bitform"))))}"authorization"===u?(s(!1),l(!1),a.ZP.error((0,n.__)(i.data,"bitform")),a.ZP.error((0,n.__)("Authorized Failed","bitform"))):(s(!1),a.ZP.error((0,n.__)("Fields refresh failed","bitform")))}))}else i({auth_token:e.auth_token?"":(0,n.__)("Api Key can't be empty","bitform")})},d=function(e,t,i){i(!0);var l={auth_token:e.auth_token};(0,o.Z)(l,"bitforms_mailerlite_fetch_all_groups").then((function(o){if(o&&o.success){var l=(0,r.Z)({},e);return o.data&&(l.groups=o.data),t(l),i(!1),void a.ZP.success((0,n.__)("Group fetch successfully","bitform"))}i(!1),a.ZP.error((0,n.__)("Group fetch failed","bitform"))}))}},61079:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(85893);function a(e){var t=e.note;return(0,r.jsxs)("div",{className:"note",children:[(0,r.jsx)("h4",{className:"mt-0",children:"Note"}),(0,r.jsx)("div",{className:"note-text",dangerouslySetInnerHTML:{__html:t}})]})}}}]);