"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6930],{14383:(e,t,l)=>{l.d(t,{FP:()=>s,Mm:()=>i,T5:()=>r,WK:()=>n,mG:()=>o,wX:()=>d});var a=l(87462),i=(l(35637),l(39492),function(e,t,l,i,n,s,r){var d=[].concat(e);if(r)d[s]=(0,a.Z)({},e[s],i),d.push({editItegration:!0}),t([].concat(d)),n.push(l);else{var o=[].concat(d);o.push(i),o.push({newItegration:!0}),t(o),n.push(l)}}),n=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},s=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):i?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,a.Z)({},s))},r=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):i?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,a.Z)({},s))},d=function(e,t,l,i,n,s){var r=(0,a.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,a.Z)({},r))},o=function(e,t,l,i,n){var s=(0,a.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,i((0,a.Z)({},s))}},85813:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(35637),i=l(85893);function n(e){var t=e.step,l=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},2515:(e,t,l)=>{l.d(t,{Pd:()=>u,Pl:()=>o,Rx:()=>s,aS:()=>r,e1:()=>d});var a=l(87462),i=l(35637),n=l(39492),s=function(e,t,l){var i=(0,a.Z)({},t);i.name=e.target.value,l((0,a.Z)({},i))},r=function(e,t,l,s){l(!0);var r={api_key:e.api_key};(0,n.Z)(r,"bitforms_sblue_refresh_lists").then((function(n){if(n&&n.success){var r=(0,a.Z)({},e);r.default||(r.default={}),n.data.sblueList&&(r.default.sblueList=n.data.sblueList),s({show:!0,msg:(0,i.__)("List refreshed","bitform")}),t((0,a.Z)({},r))}else n&&n.data&&n.data.data||!n.success&&"string"===typeof n.data?s({show:!0,msg:(0,i.g)((0,i.__)("List refresh failed Cause: %s. please try again","bitform"),n.data.data||n.data)}):s({show:!0,msg:(0,i.__)("List failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},d=function(e,t,l){var s={api_key:e.api_key};(0,n.Z)(s,"bitforms_sblue_refresh_template").then((function(n){if(n&&n.success){var s=(0,a.Z)({},e);s.default||(s.default={}),n.data.sblueTemplates&&(s.default.sblueTemplates=n.data.sblueTemplates),l({show:!0,msg:(0,i.__)("Templates refreshed","bitform")}),t((0,a.Z)({},s))}else n&&n.data&&n.data.data||!n.success&&"string"===typeof n.data?l({show:!0,msg:(0,i.g)((0,i.__)("Templates refresh failed Cause: %s. please try again","bitform"),n.data.data||n.data)}):l({show:!0,msg:(0,i.__)("Templates failed. please try again","bitform")})}))},o=function(e,t,l,s){var r={api_key:e.api_key};(0,n.Z)(r,"bitforms_sblue_headers").then((function(n){if(n&&n.success){var r=(0,a.Z)({},e);if(n.data.sendinBlueField){r.default.fields=n.data.sendinBlueField;var d=r.default.fields;r.field_map=Object.values(d).filter((function(e){return e.required})).map((function(e){return{formField:"",sendinBlueField:e.fieldId,required:!0}})),s({show:!0,msg:(0,i.__)("Sendinblue fields refreshed","bitform")})}else s({show:!0,msg:(0,i.__)("No Sendinblue fields found. Try changing the header row number or try again","bitform")});t((0,a.Z)({},r))}else s({show:!0,msg:(0,i.__)("Sendinblue fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},u=function(e){var t,l=null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.sendinBlueField&&e.required})):[];return(!e.lists||void 0!==(null==(t=e.lists)?void 0:t.length))&&!(l.length>0)}},19652:(e,t,l)=>{l.d(t,{Z:()=>v});var a=l(87462),i=l(97707),n=l(35637),s=l(68381),r=l(14383),d=l(23921),o=l(2515),u=l(85893);function c(e){var t,l=e.sendinBlueConf,i=e.setSendinBlueConf,s=(e.setisLoading,e.setSnackbar);return(0,u.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,u.jsx)(d.Z,{checked:(null==(t=l.actions)?void 0:t.update)||!1,onChange:function(e){return function(e,t){var n=(0,a.Z)({},l);"update"===t&&(e.target.checked?n.actions.update=!0:delete n.actions.update),"double_optin"===t&&(e.target.checked?(n.actions.double_optin=!0,n.templateId="",n.redirectionUrl="",(0,o.e1)(n,i,s)):(delete n.actions.double_optin,delete n.templateId,delete n.redirectionUrl)),i((0,a.Z)({},n))}(e,"update")},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,n.__)("Update Sendinblue","bitform"),subTitle:(0,n.__)("Update Responses with Sendinblue existing email?","bitform")})})}var m=l(2804),f=l(54017),p=l(23312),b=l(80410),h=l(88530);function _(e){var t,l,i,s=e.i,r=e.formFields,d=e.field,o=e.sendinBlueConf,c=e.setSendinBlueConf,_=d.required,v=(null==o||null==(t=o.default)?void 0:t.fields)&&Object.values(null==o||null==(l=o.default)?void 0:l.fields).filter((function(e){return!e.required})),x=(0,m.sJ)(f.hi).isPro,g=function(e,t){var l=(0,a.Z)({},o);l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),c(l)};return(0,u.jsxs)("div",{className:_?"mt-2 mr-1 flx w-9":"flx flx-around mt-2 mr-1",children:[(0,u.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:d.formField||"",onChange:function(e){return g(e,s)},children:[(0,u.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,u.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,u.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,u.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,u.jsx)("optgroup",{label:"General Smart Codes "+(x?"":"(PRO)"),children:x&&(null==b.C?void 0:b.C.map((function(e){return(0,u.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===d.formField&&(0,u.jsx)(h.Z,{onChange:function(e){return function(e,t){var l=(0,a.Z)({},o);l.field_map[t].customValue=e.target.value,c(l)}(e,s)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:d.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,u.jsxs)("select",{className:"btcd-paper-inp",name:"sendinBlueField",value:d.sendinBlueField,onChange:function(e){return g(e,s)},disabled:_,children:[(0,u.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),_?(null==o||null==(i=o.default)?void 0:i.fields)&&Object.values(o.default.fields).map((function(e){return(0,u.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")})):v&&v.map((function(e){return(0,u.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")}))]}),!_&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,a.Z)({},o);t.field_map.splice(e,0,{}),c(t)}(s)},className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,a.Z)({},o);t.field_map.length>1&&t.field_map.splice(e,1),c(t)}(s)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,u.jsx)(p.Z,{})})]})]})}function v(e){e.formID;var t,l,d,m=e.formFields,f=e.sendinBlueConf,p=e.setSendinBlueConf,b=e.isLoading,h=e.setisLoading,v=e.setSnackbar,x=e.error,g=e.setError,j=function(e){var t=(0,a.Z)({},f),l=(0,a.Z)({},x);l[e.target.name]="",t[e.target.name]=e.target.value,g(l),p((0,a.Z)({},t))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("List: ","bitform")}),(0,u.jsx)(i.Z,{defaultValue:null==f?void 0:f.lists,className:"btcd-paper-drpdwn w-6",options:function(){var e;return null!=f&&null!=(e=f.default)&&e.sblueList?Object.values(f.default.sblueList).map((function(e){return{label:e.name,value:String(e.id)}})):[]}(),onChange:function(e){return function(e){var t=(0,a.Z)({},f);e?(t.lists=e?e.split(","):[],!t.default.fields&&(0,o.Pl)(t,p,h,v)):delete t.lists,p((0,a.Z)({},t))}(e)}}),(0,u.jsx)("button",{onClick:function(){return(0,o.aS)(f,p,h,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Sendinblue Lists","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),b&&(0,u.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),0!==(null==f||null==(t=f.lists)?void 0:t.length)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,n.__)("Map Fields","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,n.__)("Sendinblue Fields","bitform")})})]}),f.field_map.map((function(e,t){return(0,u.jsx)(_,{i:t,field:e,sendinBlueConf:f,formFields:m,setSendinBlueConf:p},"sendinblue-m-"+(t+9))})),(0,u.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,u.jsx)("button",{onClick:function(){return(0,r.FP)(f.field_map.length,f,p)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(null==(l=f.actions)?void 0:l.double_optin)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,n.__)("Template: ","bitform")}),(0,u.jsxs)("div",{className:"w-5",children:[(0,u.jsxs)("select",{onChange:j,name:"templateId",value:null==f?void 0:f.templateId,className:"btcd-paper-inp",children:[(0,u.jsx)("option",{value:"",children:(0,n.__)("Select Template","bitform")}),(null==f||null==(d=f.default)?void 0:d.sblueTemplates)&&Object.values(f.default.sblueTemplates).map((function(e){return(0,u.jsx)("option",{value:e.id||f.templateId,children:e.name},"sendinblue-"+(e.id+2))}))]}),(0,u.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"3px"},children:x.templateId})]}),(0,u.jsx)("button",{onClick:function(){return(0,o.e1)(f,p,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Sendinblue Templates","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,n.__)("RedirectionUrl:","bitform")}),(0,u.jsxs)("div",{className:"w-5",children:[(0,u.jsx)("input",{type:"url",className:"btcd-paper-inp",placeholder:"Redirection URL",onChange:j,value:(null==f?void 0:f.redirectionUrl)||"",name:"redirectionUrl"}),(0,u.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"3px"},children:x.redirectionUrl})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,n.__)("Actions","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsx)(c,{sendinBlueConf:f,setSendinBlueConf:p,setisLoading:h,setSnackbar:v})]})]})}},88530:(e,t,l)=>{l.d(t,{Z:()=>i});var a=l(85893);const i=function(e){var t=e.label,l=e.onChange,i=e.value,n=e.disabled,s=e.type,r=e.textarea,d=e.className;return(0,a.jsxs)("label",{className:"btcd-mt-inp "+d,children:[!r&&(0,a.jsx)("input",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:n,value:i}),r&&(0,a.jsx)("textarea",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:n,value:i}),(0,a.jsx)("span",{children:t})]})}}}]);