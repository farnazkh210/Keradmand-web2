"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9421],{71078:(e,t,a)=>{a.d(t,{P_:()=>d,Rx:()=>n,hQ:()=>o});var r=a(87462),i=a(80160),s=a(39492),l=a(35637),n=function(e,t,a,i,s,l,n,o){var d=(0,r.Z)({},t),c=e.target.name;""!==e.target.value?d[c]=e.target.value:delete d[c],a((0,r.Z)({},d))},o=function(e,t,a){var n;void 0===e&&(e=null);var o={formID:e,id:null!=(n=t.id)?n:null,apiKey:t.apiKey,apiSecret:t.apiSecret,tokenDetails:t.tokenDetails},d=(0,s.Z)(o,"bitforms_dropbox_get_all_folders").then((function(e){if(e&&e.success){var i=(0,r.Z)({},t);return e.data.dropboxFoldersList&&(i.foldersList=e.data.dropboxFoldersList,i.tokenDetails=e.data.tokenDetails),a(i),"Dropbox Folders List refreshed successfully"}return"Dropbox Folders List refresh failed. please try again"}));i.ZP.promise(d,{success:function(e){return e},error:(0,l.__)("Error Occurred","bitform"),loading:(0,l.__)("Loading Dropbox Folders List...","bitform")})},d=function(e,t,a,n){if(e.accessCode&&e.apiKey&&e.apiSecret){n(!0);var o={apiKey:e.apiKey,apiSecret:e.apiSecret,accessCode:e.accessCode};(0,s.Z)(o,"bitforms_dropbox_authorization").then((function(s){if(s&&s.success){var o=(0,r.Z)({},e);o.tokenDetails=s.data,t(o),a(!0),i.ZP.success((0,l.__)("Authorized Successfully","bitform"))}else s&&s.data&&s.data.data||!s.success&&"string"===typeof s.data?i.ZP.error(""+(0,l.__)("Authorization failed Cause: ","bitform")+(s.data.data||s.data)+". "+(0,l.__)("please try again","bitform")):i.ZP.error((0,l.__)("Authorization failed. please try again","bitform"));n(!1)}))}else i.ZP.error((0,l.__)("Dropbox ApiKey, ApiSecret & Access Code can't be empty","bitform"))}},55363:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(35637),i=a(87462),s=a(23921),l=a(85893);function n(e){var t,a=e.dropboxConf,n=e.setDropboxConf;return(0,l.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,l.jsx)(s.Z,{checked:(null==(t=a.actions)?void 0:t.delete_from_wp)||!1,onChange:function(e){return function(e,t){var r=(0,i.Z)({},a);"deleteFile"===t&&(e.target.checked?r.actions.delete_from_wp=!0:delete r.actions.delete_from_wp),n((0,i.Z)({},r))}(e,"deleteFile")},className:"mt-4 mr-2",value:"delete_from_wp",title:(0,r.__)("Delete File From Wordpress","bitform"),subTitle:(0,r.__)("Delete file from Wordpress after upload in Dropbox","bitform")})})}var o=a(71078),d=a(52249),c=function(e,t,a){var r=(0,i.Z)({},t);r.field_map.splice(e,0,{}),a((0,i.Z)({},r))};function m(e){var t=e.i,a=e.formFields,s=e.field,n=e.dropboxConf,o=e.setDropboxConf,m=function(e,t){var a=(0,i.Z)({},n);a.field_map[t][e.target.name]=e.target.value,o((0,i.Z)({},a))};return(0,l.jsx)("div",{className:"flx mt-2 mr-1",children:(0,l.jsxs)("div",{className:"pos-rel flx",children:[(0,l.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,l.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:function(e){return m(e,t)},children:[(0,l.jsx)("option",{value:"",children:(0,r.__)("Select Field","bitform")}),null==a?void 0:a.filter((function(e){return"file-up"===e.type})).map((function(e){return(0,l.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))]}),(0,l.jsxs)("select",{className:"btcd-paper-inp",name:"dropboxFormField",value:s.dropboxFormField,onChange:function(e){return m(e,t)},children:[(0,l.jsx)("option",{value:"",children:(0,r.__)("Select Folder","bitform")}),(0,d.L1)(n.foldersList,"lower_path","ASC").map((function(e){e.name;var t=e.lower_path;return(0,l.jsx)("option",{value:t,children:t.substring(1).split("/").map((function(e){return e.replace("/",">")})).join(" > ")},t)}))]})]}),(0,l.jsx)("button",{onClick:function(){return c(t,n,o)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,l.jsx)("button",{onClick:function(){return function(e,t,a){var r=(0,i.Z)({},t);r.field_map.length>1&&r.field_map.splice(e,1),a((0,i.Z)({},r))}(t,n,o)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,l.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})})}function f(e){var t=e.formID,a=e.formFields,i=e.dropboxConf,s=e.setDropboxConf;e.isLoading,e.setIsLoading;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-5",children:[(0,l.jsx)("b",{className:"wdt-100",children:(0,r.__)("Field Map","bitform")}),(0,l.jsx)("button",{onClick:function(){return(0,o.hQ)(t,i,s)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,r.__)("Fetch All Dropbox Folders","bitform")+"'"},type:"button",children:"↻"})]}),(0,l.jsx)("div",{className:"btcd-hr mt-1"}),(0,l.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,r.__)("File Input","bitform")})}),(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,r.__)("Dropbox Folder","bitform")})})]}),null==i?void 0:i.field_map.map((function(e,t){return(0,l.jsx)(m,{i:t,field:e,formFields:a,dropboxConf:i,setDropboxConf:s},"rp-m-"+(t+9))})),(0,l.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,l.jsx)("button",{onClick:function(){return c(i.field_map.length,i,s)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("b",{className:"wdt-100",children:(0,r.__)("Actions","bitform")})}),(0,l.jsx)("div",{className:"btcd-hr mt-1"}),(0,l.jsx)(n,{dropboxConf:i,setDropboxConf:s})]})}},49421:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(87462),i=a(67294),s=a(5977),l=a(35637),n=a(35001),o=a(14383),d=a(85813),c=a(71078),m=a(55363),f=a(85893);const p=function(e){var t=e.allIntegURL,a=e.formFields,p=e.integrations,u=e.setIntegration,b=(0,s.k6)(),_=(0,s.UO)(),x=_.id,h=_.formID,v=(0,i.useState)((0,r.Z)({},p[x])),g=v[0],j=v[1],Z=(0,i.useState)(!1),N=Z[0],C=Z[1],y=(0,i.useState)({show:!1}),F=y[0],w=y[1];return(0,f.jsxs)("div",{style:{width:900},children:[(0,f.jsx)(n.Z,{snack:F,setSnackbar:w}),(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,l.__)("Integration Name:","bitform")}),(0,f.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,c.Rx)(e,g,j)},name:"name",value:g.name,type:"text",placeholder:(0,l.__)("Integration Name...","bitform")})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)(m.Z,{formID:h,formFields:a,dropboxConf:g,setDropboxConf:j,isLoading:N,setIsLoading:C}),(0,f.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,o.Mm)(p,u,t,g,b,x,1)},disabled:g.field_map.length<1,isLoading:N}),(0,f.jsx)("br",{})]})}},14383:(e,t,a)=>{a.d(t,{FP:()=>l,Mm:()=>i,T5:()=>n,WK:()=>s,mG:()=>d,wX:()=>o});var r=a(87462),i=(a(35637),a(39492),function(e,t,a,i,s,l,n){var o=[].concat(e);if(n)o[l]=(0,r.Z)({},e[l],i),o.push({editItegration:!0}),t([].concat(o)),s.push(a);else{var d=[].concat(o);d.push(i),d.push({newItegration:!0}),t(d),s.push(a)}}),s=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},l=function(e,t,a,i,s){var l=(0,r.Z)({},t);s?i?l.relatedlists[s-1].upload_field_map.splice(e,0,{}):l.relatedlists[s-1].field_map.splice(e,0,{}):i?l.upload_field_map.splice(e,0,{}):l.field_map.splice(e,0,{}),a((0,r.Z)({},l))},n=function(e,t,a,i,s){var l=(0,r.Z)({},t);s?i?l.relatedlists[s-1].upload_field_map.length>1&&l.relatedlists[s-1].upload_field_map.splice(e,1):l.relatedlists[s-1].field_map.length>1&&l.relatedlists[s-1].field_map.splice(e,1):i?l.upload_field_map.length>1&&l.upload_field_map.splice(e,1):l.field_map.length>1&&l.field_map.splice(e,1),a((0,r.Z)({},l))},o=function(e,t,a,i,s,l){var n=(0,r.Z)({},a);l?s?n.relatedlists[l-1].upload_field_map[t][e.target.name]=e.target.value:n.relatedlists[l-1].field_map[t][e.target.name]=e.target.value:s?n.upload_field_map[t][e.target.name]=e.target.value:n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l?n.relatedlists[l-1].field_map[t].customValue="":n.field_map[t].customValue=""),i((0,r.Z)({},n))},d=function(e,t,a,i,s){var l=(0,r.Z)({},a);s?l.relatedlists[s-1].field_map[t].customValue=e.target.value:l.field_map[t].customValue=e.target.value,i((0,r.Z)({},l))}},85813:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(35637),i=a(85893);function s(e){var t=e.step,a=e.saveConfig,s=e.edit,l=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,r.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,r.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,r.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);