"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3090],{7012:(e,t,l)=>{l.d(t,{Pd:()=>o,Rx:()=>u,ow:()=>s});var n=l(87462),a=l(35637),i=l(39492),s=function(e,t,l,s,d){s(!0),(0,i.Z)({},"bitforms_refresh_fluent_crm_lists").then((function(e){if(e&&e.success){var i=(0,n.Z)({},t);i.default||(i.default={}),e.data.fluentCrmList&&(i.default.fluentCrmList=e.data.fluentCrmList),e.data.fluentCrmTags&&(i.default.fluentCrmTags=e.data.fluentCrmTags),d({show:!0,msg:(0,a.__)("FluentCRM list refreshed","bitform")}),r(i,l,s,d)}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,a.__)("FluentCRM list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,a.__)("please try again","bitform")}):d({show:!0,msg:(0,a.__)("FluentCRM list refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},r=function(e,t,l,s){(0,i.Z)({},"bitforms_fluent_crm_headers").then((function(i){if(i&&i.success){var r=(0,n.Z)({},e);i.data.fluentCrmFlelds?(r.default.fields=i.data.fluentCrmFlelds,r.field_map=d(e),s({show:!0,msg:(0,a.__)("Fluent CRM fields refreshed","bitform")})):s({show:!0,msg:(0,a.__)("No Fluent CRM fields found. Try changing the header row number or try again","bitform")}),t((0,n.Z)({},r))}else s({show:!0,msg:(0,a.__)("Fluent CRM fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},d=function(e){var t=e.field_map,l=e.default.fields,a=Object.values(l).filter((function(e){return e.required})).map((function(e){return{formField:"",fluentCRMField:e.key,required:!0}})).filter((function(e){return!t.find((function(t){return t.fluentCRMField===e.fluentCRMField}))})),i=t.filter((function(e){return e.fluentCRMField||e.formField})).map((function(e){var t=l[e.fluentCRMField];return t?(0,n.Z)({},e,{formField:t.label}):e}));return[].concat(a,i)},u=function(e,t,l){var a=(0,n.Z)({},t);a.name=e.target.value,l((0,n.Z)({},a))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.fluentCRMField&&e.required})):[]).length>0)}},30668:(e,t,l)=>{l.d(t,{Z:()=>v});var n=l(87462),a=l(97707),i=l(35637),s=l(68381),r=l(14383),d=l(23921),u=l(85893);function o(e){var t,l,a=e.fluentCrmConf,s=e.setFluentCrmConf,r=(e.formFields,function(e,t){var l=(0,n.Z)({},a);"exists"===t&&(e.target.checked?l.actions.skip_if_exists=!0:delete l.actions.skip_if_exists),"doubleOpIn"===t&&(e.target.checked?l.actions.double_opt_in=!0:delete l.actions.double_opt_in),s((0,n.Z)({},l))});return(0,u.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,u.jsx)(d.Z,{checked:(null==(t=a.actions)?void 0:t.skip_if_exists)||!1,onChange:function(e){return r(e,"exists")},className:"wdt-200 mt-4 mr-2",value:"skip_if_exists",title:(0,i.__)("Skip exist Contact","bitform"),subTitle:(0,i.__)("Skip if contact already exist in FluentCRM","bitform")}),(0,u.jsx)(d.Z,{checked:(null==(l=a.actions)?void 0:l.double_opt_in)||!1,onChange:function(e){return r(e,"doubleOpIn")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,i.__)("Double Opt-in","bitform"),subTitle:(0,i.__)("Enable Double Option for new contacts","bitform")})]})}var f=l(7012),c=l(2804),m=l(54017),p=l(23312),_=l(80410),h=l(88530);function b(e){var t,l,a,s=e.i,r=e.formFields,d=e.field,o=e.fluentCrmConf,f=e.setFluentCrmConf,b=d.required,v=(null==o||null==(t=o.default)?void 0:t.fields)&&Object.values(null==o||null==(l=o.default)?void 0:l.fields).filter((function(e){return!e.required})),x=(0,c.sJ)(m.hi).isPro,g=function(e,t){var l=(0,n.Z)({},o);l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),f(l)};return(0,u.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,u.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,u.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:d.formField||"",onChange:function(e){return g(e,s)},children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),(0,u.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,u.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,u.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")}),(0,u.jsx)("optgroup",{label:"General Smart Codes "+(x?"":"(PRO)"),children:x&&(null==_.C?void 0:_.C.map((function(e){return(0,u.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===d.formField&&(0,u.jsx)(h.Z,{onChange:function(e){return function(e,t){var l=(0,n.Z)({},o);l.field_map[t].customValue=e.target.value,f(l)}(e,s)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:d.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,u.jsxs)("select",{className:"btcd-paper-inp",name:"fluentCRMField",value:d.fluentCRMField,onChange:function(e){return g(e,s)},disabled:b,children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),b?(null==o||null==(a=o.default)?void 0:a.fields)&&Object.values(o.default.fields).map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.label},e.key+"-1")})):v&&v.map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.label},e.key+"-1")}))]})]}),!b&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},o);t.field_map.splice(e,0,{}),f(t)}(s)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},o);t.field_map.length>1&&t.field_map.splice(e,1),f(t)}(s)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,u.jsx)(p.Z,{})})]})]})}function v(e){var t,l,d=e.formID,c=e.formFields,m=e.fluentCrmConf,p=e.setFluentCrmConf,_=e.isLoading,h=e.setisLoading,v=e.setSnackbar;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,i.__)("Fluent CRM List:","bitform")}),(0,u.jsxs)("select",{onChange:function(e){return function(e){var t=(0,n.Z)({},m);t.list_id=e.target.value,p((0,n.Z)({},t))}(e)},name:"list_id",value:m.list_id,className:"btcd-paper-inp w-5",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Fluent CRM list","bitform")}),(null==m||null==(t=m.default)?void 0:t.fluentCrmList)&&Object.keys(m.default.fluentCrmList).map((function(e){return(0,u.jsx)("option",{value:m.default.fluentCrmList[e].id,children:m.default.fluentCrmList[e].title},e)}))]}),(0,u.jsx)("button",{onClick:function(){return(0,f.ow)(d,m,p,h,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Fluent CRM List","bitform")+"'"},type:"button",disabled:_,children:"↻"})]}),(0,u.jsxs)("div",{className:"flx mt-5",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,i.__)("Fluent CRM Tags: ","bitform")}),(0,u.jsx)(a.Z,{defaultValue:null==m?void 0:m.tags,className:"btcd-paper-drpdwn w-5",options:(null==m||null==(l=m.default)?void 0:l.fluentCrmTags)&&Object.keys(m.default.fluentCrmTags).map((function(e){return{label:m.default.fluentCrmTags[e].title,value:m.default.fluentCrmTags[e].id.toString()}})),onChange:function(e){return function(e){var t=(0,n.Z)({},m);e?t.tags=e?e.split(","):[]:delete t.tags,p((0,n.Z)({},t))}(e)}})]}),_&&(0,u.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Fluent CRM Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,u.jsx)(b,{i:t,field:e,fluentCrmConf:m,formFields:c,setFluentCrmConf:p},"fluentcrm-m-"+(t+9))})),(0,u.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,u.jsx)("button",{onClick:function(){return(0,r.FP)(m.field_map.length,m,p)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsx)(o,{fluentCrmConf:m,setFluentCrmConf:p,setisLoading:h,setSnackbar:v})]})}},14383:(e,t,l)=>{l.d(t,{FP:()=>s,Mm:()=>a,T5:()=>r,WK:()=>i,mG:()=>u,wX:()=>d});var n=l(87462),a=(l(35637),l(39492),function(e,t,l,a,i,s,r){var d=[].concat(e);if(r)d[s]=(0,n.Z)({},e[s],a),d.push({editItegration:!0}),t([].concat(d)),i.push(l);else{var u=[].concat(d);u.push(a),u.push({newItegration:!0}),t(u),i.push(l)}}),i=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},s=function(e,t,l,a,i){var s=(0,n.Z)({},t);i?a?s.relatedlists[i-1].upload_field_map.splice(e,0,{}):s.relatedlists[i-1].field_map.splice(e,0,{}):a?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,n.Z)({},s))},r=function(e,t,l,a,i){var s=(0,n.Z)({},t);i?a?s.relatedlists[i-1].upload_field_map.length>1&&s.relatedlists[i-1].upload_field_map.splice(e,1):s.relatedlists[i-1].field_map.length>1&&s.relatedlists[i-1].field_map.splice(e,1):a?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,n.Z)({},s))},d=function(e,t,l,a,i,s){var r=(0,n.Z)({},l);s?i?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:i?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),a((0,n.Z)({},r))},u=function(e,t,l,a,i){var s=(0,n.Z)({},l);i?s.relatedlists[i-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,a((0,n.Z)({},s))}},85813:(e,t,l)=>{l.d(t,{Z:()=>i});var n=l(35637),a=l(85893);function i(e){var t=e.step,l=e.saveConfig,i=e.edit,s=e.disabled;return i?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,n.__)("Update","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}},88530:(e,t,l)=>{l.d(t,{Z:()=>a});var n=l(85893);const a=function(e){var t=e.label,l=e.onChange,a=e.value,i=e.disabled,s=e.type,r=e.textarea,d=e.className;return(0,n.jsxs)("label",{className:"btcd-mt-inp "+d,children:[!r&&(0,n.jsx)("input",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:i,value:a}),r&&(0,n.jsx)("textarea",{type:void 0===s?"text":s,onChange:l,placeholder:" ",disabled:i,value:a}),(0,n.jsx)("span",{children:t})]})}}}]);