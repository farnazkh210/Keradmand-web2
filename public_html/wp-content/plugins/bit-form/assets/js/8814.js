"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8814],{14383:(e,n,t)=>{t.d(n,{FP:()=>a,Mm:()=>l,T5:()=>r,WK:()=>s,mG:()=>d,wX:()=>o});var i=t(87462),l=(t(35637),t(39492),function(e,n,t,l,s,a,r){var o=[].concat(e);if(r)o[a]=(0,i.Z)({},e[a],l),o.push({editItegration:!0}),n([].concat(o)),s.push(t);else{var d=[].concat(o);d.push(l),d.push({newItegration:!0}),n(d),s.push(t)}}),s=function(e){var n={},t=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");t&&t.forEach((function(e){var t=e.split("=");t[1]&&(n[t[0]]=t[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(n)),window.close()},a=function(e,n,t,l,s){var a=(0,i.Z)({},n);s?l?a.relatedlists[s-1].upload_field_map.splice(e,0,{}):a.relatedlists[s-1].field_map.splice(e,0,{}):l?a.upload_field_map.splice(e,0,{}):a.field_map.splice(e,0,{}),t((0,i.Z)({},a))},r=function(e,n,t,l,s){var a=(0,i.Z)({},n);s?l?a.relatedlists[s-1].upload_field_map.length>1&&a.relatedlists[s-1].upload_field_map.splice(e,1):a.relatedlists[s-1].field_map.length>1&&a.relatedlists[s-1].field_map.splice(e,1):l?a.upload_field_map.length>1&&a.upload_field_map.splice(e,1):a.field_map.length>1&&a.field_map.splice(e,1),t((0,i.Z)({},a))},o=function(e,n,t,l,s,a){var r=(0,i.Z)({},t);a?s?r.relatedlists[a-1].upload_field_map[n][e.target.name]=e.target.value:r.relatedlists[a-1].field_map[n][e.target.name]=e.target.value:s?r.upload_field_map[n][e.target.name]=e.target.value:r.field_map[n][e.target.name]=e.target.value,"custom"===e.target.value&&(a?r.relatedlists[a-1].field_map[n].customValue="":r.field_map[n].customValue=""),l((0,i.Z)({},r))},d=function(e,n,t,l,s){var a=(0,i.Z)({},t);s?a.relatedlists[s-1].field_map[n].customValue=e.target.value:a.field_map[n].customValue=e.target.value,l((0,i.Z)({},a))}},85813:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(35637),l=t(85893);function s(e){var n=e.step,t=e.saveConfig,s=e.edit,a=e.disabled;return s?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,i.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===n&&"90%",height:3===n&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},53128:(e,n,t)=>{t.d(n,{GF:()=>o,Kv:()=>m,P_:()=>d,Rx:()=>r,TN:()=>u,gn:()=>c,pK:()=>f});var i=t(87462),l=t(80160),s=t(39492),a=(t(52249),t(35637)),r=function(e,n,t,l,s,a){var r=(0,i.Z)({},n),d=e.target.name;""!==e.target.value?r[d]=e.target.value:delete r[d],"2"===r.mainAction&&o(r,t,l,s),t((0,i.Z)({},r))},o=function(e,n,t,r){t(!0);var o={access_token:e.access_token};(0,s.Z)(o,"bitforms_sendfox_fetch_all_list").then((function(s){if(s&&s.success){var r=(0,i.Z)({},e);return r.default||(r.default={}),s.data&&(r.default.allLists=s.data.data),n((0,i.Z)({},r)),t(!1),void l.ZP.success((0,a.__)("Lists fetched successfully","bit-integrations"))}t(!1),l.ZP.error((0,a.__)("Lists fetch failed. please try again","bit-integrations"))})).catch((function(){return t(!1)}))},d=function(e,n,t,r,o,d){if(e.access_token){t({}),o(!0);var c={access_token:e.access_token};(0,s.Z)(c,"bitforms_sendFox_authorize").then((function(t){if(t&&t.success){var s=(0,i.Z)({},e);return n(s),r(!0),o(!1),void l.ZP.success((0,a.__)("Authorized successfully","bit-integrations"))}o(!1),l.ZP.error((0,a.__)("Authorized failed","bit-integrations"))}))}else t({access_token:e.access_token?"":(0,a.__)("Access Token can't be empty","bit-integrations")})},c=function(e){var n=null==e?void 0:e.contactFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxFormField:e.key}})):[{formField:"",sendFoxFormField:""}]},u=function(e){var n=null==e?void 0:e.listFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxListFormField:e.key}})):[{formField:"",sendFoxListFormField:""}]},m=function(e){var n=null==e?void 0:e.unsubscribeFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxUnsubscribeFormField:e.key}})):[{formField:"",sendFoxUnsubscribeFormField:""}]},f=function(e){return"1"===e.mainAction?!function(e){return!((null!=e&&e.field_map_list?e.field_map_list.filter((function(n){var t,i,l;return!n.formField&&n.sendFoxListFormField&&-1!==(null==e||null==(t=e.default)||null==(i=t.allFields)||null==(l=i[e.listId])?void 0:l.required.indexOf(n.sendFoxListFormField))})):[]).length>0)}(e):"2"===e.mainAction?!function(e){return(!e.field_map||!e.field_map.find((function(e){return!e.formField||!e.sendFoxFormField})))&&!((null!=e&&e.field_map?e.field_map.filter((function(n){var t,i,l;return!n.formField&&n.sendFoxFormField&&-1!==(null==e||null==(t=e.default)||null==(i=t.allFields)||null==(l=i[e.listId])?void 0:l.required.indexOf(n.sendFoxFormField))})):[]).length>0)}(e)||void 0===e.listId||""===e.listId:!function(e){return!((null!=e&&e.field_map_unsubscribe?e.field_map_unsubscribe.filter((function(n){var t,i,l;return!n.formField&&n.sendFoxUnsubscribeFormField&&-1!==(null==e||null==(t=e.default)||null==(i=t.allFields)||null==(l=i[e.listId])?void 0:l.required.indexOf(n.sendFoxUnsubscribeFormField))})):[]).length>0)}(e)}},12996:(e,n,t)=>{t.d(n,{Z:()=>N});var i=t(87462),l=t(97707),s=t(35637),a=t(68381),r=t(14383),o=t(53128),d=t(2804),c=t(67294),u=t(88530),m=function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[n].customValue=""),l((0,i.Z)({},s))},f=function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map_list[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map_list[n].customValue=""),l((0,i.Z)({},s))},p=function(e,n,t){var l=(0,i.Z)({},n);l.field_map_list.splice(e,0,{}),t((0,i.Z)({},l))},b=function(e,n,t){var l=(0,i.Z)({},n);l.field_map_list.length>1&&l.field_map_list.splice(e,1),t((0,i.Z)({},l))},x=function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map_unsubscribe[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map_unsubscribe[n].customValue=""),l((0,i.Z)({},s))},h=t(80410),_=t(54017),v=t(85893);function F(e){var n=e.i,t=e.formFields,l=e.field,a=e.sendFoxConf,r=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==a||null==(e=a.field_map)?void 0:e.length)&&""===l.sendFoxFormField){var n=(0,i.Z)({},a),t=(0,o.gn)(n);n.field_map=t,r(n)}}));var f=(null==a?void 0:a.contactFields.filter((function(e){return!0===e.required})))||[],p=(null==a?void 0:a.contactFields.filter((function(e){return!1===e.required})))||[],b=(0,d.sJ)(_.hi).isPro;return(0,v.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,v.jsxs)("div",{className:"pos-rel flx",children:[(0,v.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,v.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return m(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,v.jsx)("optgroup",{label:"Form Fields",children:t.map((function(e){return"file-up"!==e.type&&(0,v.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,v.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,v.jsx)("optgroup",{label:"General Smart Codes "+(b?"":"(PRO)"),children:b&&(null==h.C?void 0:h.C.map((function(e){return(0,v.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,v.jsx)(u.Z,{onChange:function(e){return function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map[n].customValue=e.target.value,l((0,i.Z)({},s))}(e,n,a,r)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,v.jsxs)("select",{className:"btcd-paper-inp",disabled:n<f.length,name:"sendFoxFormField",value:n<f.length?f[n].key||"":l.sendFoxFormField||"",onChange:function(e){return m(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<f.length?(0,v.jsx)("option",{value:f[n].key,children:f[n].label},f[n].key):p.map((function(e){var n=e.key,t=e.label;return(0,v.jsx)("option",{value:n,children:t},n)}))]})]}),n>=f.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:function(){return function(e,n,t){var l=(0,i.Z)({},n);l.field_map.splice(e,0,{}),t((0,i.Z)({},l))}(n,a,r)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,v.jsx)("button",{onClick:function(){return function(e,n,t){var l=(0,i.Z)({},n);l.field_map.length>1&&l.field_map.splice(e,1),t((0,i.Z)({},l))}(n,a,r)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,v.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function g(e){var n=e.i,t=e.formFields,l=e.field,a=e.sendFoxConf,r=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==a||null==(e=a.field_map_list)?void 0:e.length)&&""===l.sendFoxListFormField){var n=(0,i.Z)({},a),t=(0,o.TN)(n);n.field_map_list=t,r(n)}}));var m=(null==a?void 0:a.listFields.filter((function(e){return!0===e.required})))||[],x=(null==a?void 0:a.listFields.filter((function(e){return!1===e.required})))||[],F=(0,d.sJ)(_.hi).isPro;return(0,v.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,v.jsxs)("div",{className:"pos-rel flx",children:[(0,v.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,v.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return f(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,v.jsx)("optgroup",{label:"Form Fields",children:t.map((function(e){return"file-up"!==e.type&&(0,v.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,v.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,v.jsx)("optgroup",{label:"General Smart Codes "+(F?"":"(PRO)"),children:F&&(null==h.C?void 0:h.C.map((function(e){return(0,v.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,v.jsx)(u.Z,{onChange:function(e){return function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map_list[n].customValue=e.target.value,l((0,i.Z)({},s))}(e,n,a,r)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,v.jsxs)("select",{className:"btcd-paper-inp",disabled:n<m.length,name:"sendFoxListFormField",value:n<m.length?m[n].key||"":l.sendFoxListFormField||"",onChange:function(e){return f(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<m.length?(0,v.jsx)("option",{value:m[n].key,children:m[n].label},m[n].key):x.map((function(e){var n=e.key,t=e.label;return(0,v.jsx)("option",{value:n,children:t},n)}))]})]}),n>=m.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:function(){return p(n,a,r)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,v.jsx)("button",{onClick:function(){return b(n,a,r)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,v.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function j(e){var n=e.i,t=e.formFields,l=e.field,a=e.sendFoxConf,r=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==a||null==(e=a.field_map_unsubscribe)?void 0:e.length)&&""===l.sendFoxUnsubscribeFormField){var n=(0,i.Z)({},a),t=(0,o.Kv)(n);n.field_map_unsubscribe=t,r(n)}}));var m=(null==a?void 0:a.unsubscribeFields.filter((function(e){return!0===e.required})))||[],f=(null==a?void 0:a.unsubscribeFields.filter((function(e){return!1===e.required})))||[],F=(0,d.sJ)(_.hi).isPro;return(0,v.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,v.jsxs)("div",{className:"pos-rel flx",children:[(0,v.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,v.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return x(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,v.jsx)("optgroup",{label:"Form Fields",children:t.map((function(e){return"file-up"!==e.type&&(0,v.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,v.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,v.jsx)("optgroup",{label:"General Smart Codes "+(F?"":"(PRO)"),children:F&&(null==h.C?void 0:h.C.map((function(e){return(0,v.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,v.jsx)(u.Z,{onChange:function(e){return function(e,n,t,l){var s=(0,i.Z)({},t);s.field_map_unsubscribe[n].customValue=e.target.value,l((0,i.Z)({},s))}(e,n,a,r)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,v.jsxs)("select",{className:"btcd-paper-inp",disabled:n<m.length,name:"sendFoxUnsubscribeFormField",value:n<m.length?m[n].key||"":l.sendFoxUnsubscribeFormField||"",onChange:function(e){return x(e,n,a,r)},children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<m.length?(0,v.jsx)("option",{value:m[n].key,children:m[n].label},m[n].key):f.map((function(e){var n=e.key,t=e.label;return(0,v.jsx)("option",{value:n,children:t},n)}))]})]}),n>=m.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:function(){return p(n,a,r)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,v.jsx)("button",{onClick:function(){return b(n,a,r)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,v.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function N(e){var n,t=e.formFields,d=e.handleInput,c=e.sendFoxConf,u=e.setSendFoxConf,m=e.isLoading,f=e.setIsLoading,p=e.setSnackbar,b=((null==c||null==(n=c.default)?void 0:n.allLists)||[]).map((function(e){var n=e.id;return{label:e.name,value:""+n}}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsx)("b",{className:"wdt-200 d-in-b",children:(0,s.__)("Actions:","bit-integrations")}),(0,v.jsxs)("select",{onChange:d,name:"mainAction",value:c.mainAction,className:"btcd-paper-inp w-5",children:[(0,v.jsx)("option",{value:"",children:(0,s.__)("Select Actions","bit-integrations")}),c.allActions&&c.allActions.map((function(e){var n=e.key,t=e.label;return(0,v.jsx)("option",{value:n,children:t},n)}))]}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),m&&(0,v.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),"1"===c.mainAction&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mt-5",children:(0,v.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,v.jsx)("div",{className:"btcd-hr mt-1"}),(0,v.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("SendFox List Fields","bit-integrations")})})]}),null==c?void 0:c.field_map_list.map((function(e,n){return(0,v.jsx)(g,{i:n,field:e,sendFoxConf:c,formFields:t,setSendFoxConf:u,setSnackbar:p},"rp-m-"+(n+9))}))]}),"2"===c.mainAction&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"d-flx",children:[(0,v.jsx)("b",{className:"wdt-200 d-in-b mt-3 mt-i-3",children:(0,s.__)("All List:","bit-integrations")}),(0,v.jsx)(l.Z,{options:b,className:"btcd-paper-drpdwn w-5",defaultValue:c.listId,onChange:function(e){return function(e){var n=(0,i.Z)({},c);n.listId=e||"",u((0,i.Z)({},n))}(e)},customValue:!0}),(0,v.jsx)("button",{onClick:function(){return(0,o.GF)(c,u,f,p)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh SendFox List","bit-integrations")+"'",height:"35px"},type:"button",disabled:m,children:"↻"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("div",{className:"mt-5",children:(0,v.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,v.jsx)("div",{className:"btcd-hr mt-1"}),(0,v.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("SendFox Fields","bit-integrations")})})]}),(null==c?void 0:c.listId)&&(null==c?void 0:c.field_map.map((function(e,n){return(0,v.jsx)(F,{i:n,field:e,sendFoxConf:c,formFields:t,setSendFoxConf:u,setSnackbar:p},"rp-m-"+(n+9))}))),(0,v.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,v.jsx)("button",{onClick:function(){return(0,r.FP)(c.field_map.length,c,u,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),"3"===c.mainAction&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mt-5",children:(0,v.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,v.jsx)("div",{className:"btcd-hr mt-1"}),(0,v.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,s.__)("SendFox Unsubscribe Fields","bit-integrations")})})]}),null==c?void 0:c.field_map_unsubscribe.map((function(e,n){return(0,v.jsx)(j,{i:n,field:e,sendFoxConf:c,formFields:t,setSendFoxConf:u,setSnackbar:p},"rp-m-"+(n+9))}))]}),(0,v.jsx)("br",{})]})}},88530:(e,n,t)=>{t.d(n,{Z:()=>l});var i=t(85893);const l=function(e){var n=e.label,t=e.onChange,l=e.value,s=e.disabled,a=e.type,r=e.textarea,o=e.className;return(0,i.jsxs)("label",{className:"btcd-mt-inp "+o,children:[!r&&(0,i.jsx)("input",{type:void 0===a?"text":a,onChange:t,placeholder:" ",disabled:s,value:l}),r&&(0,i.jsx)("textarea",{type:void 0===a?"text":a,onChange:t,placeholder:" ",disabled:s,value:l}),(0,i.jsx)("span",{children:n})]})}}}]);