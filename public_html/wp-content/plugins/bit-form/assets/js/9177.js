"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9177],{14383:(e,t,a)=>{a.d(t,{FP:()=>s,Mm:()=>l,T5:()=>r,WK:()=>n,mG:()=>c,wX:()=>o});var i=a(87462),l=(a(35637),a(39492),function(e,t,a,l,n,s,r){var o=[].concat(e);if(r)o[s]=(0,i.Z)({},e[s],l),o.push({editItegration:!0}),t([].concat(o)),n.push(a);else{var c=[].concat(o);c.push(l),c.push({newItegration:!0}),t(c),n.push(a)}}),n=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},s=function(e,t,a,l,n){var s=(0,i.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):l?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),a((0,i.Z)({},s))},r=function(e,t,a,l,n){var s=(0,i.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):l?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),a((0,i.Z)({},s))},o=function(e,t,a,l,n,s){var r=(0,i.Z)({},a);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),l((0,i.Z)({},r))},c=function(e,t,a,l,n){var s=(0,i.Z)({},a);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,l((0,i.Z)({},s))}},85813:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(35637),l=a(85893);function n(e){var t=e.step,a=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,i.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},77376:(e,t,a)=>{a.d(t,{P_:()=>r,ZP:()=>s});var i=a(87462),l=a(35637),n=a(39492);function s(e,t,a,l,n,s,r,o,c){var d=(0,i.Z)({},t);if(r){var m=(0,i.Z)({},o);m[e.target.name]="",c((0,i.Z)({},m))}d[e.target.name]=e.target.value,a((0,i.Z)({},d))}var r=function(e,t,a,n,s,r){if(e.dataCenter&&e.clientId&&e.clientSecret){s(!0);var c="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoMail.accounts.Read,ZohoMail.messages.CREATE,ZohoMail.messages.UPDATE,ZohoMail.Attachments.CREATE,ZohoMail.Attachments.READ,ZohoMail.Attachments.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(c,"zohoMail","width=400,height=609,toolbar=off"),m=setInterval((function(){if(d.closed){clearInterval(m);var a={},c=!1,u=localStorage.getItem("__bitforms_zohoMail");if(u&&(c=!0,a=JSON.parse(u),localStorage.removeItem("__bitforms_zohoMail")),a.code&&!a.error&&a&&c){var f=(0,i.Z)({},e);f.accountServer=a["accounts-server"],o(a,f,t,n,s,r)}else{var h=a.error?"Cause: "+a.error:"";r({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+h+". "+(0,l.__)("please try again","bitform")}),s(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,l.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},o=function(e,t,a,s,r,o){var c=(0,i.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,n.Z)(c,"bitforms_zmail_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var n=(0,i.Z)({},t);n.tokenDetails=e.data,a(n),s(!0),o({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):o({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});r(!1)}))}},65318:(e,t,a)=>{a.d(t,{Z:()=>p});var i=a(87462),l=a(12902),n=a(97707),s=(a(78774),a(2804)),r=a(54017),o=a(35637),c=a(93429),d=a(67294),m=a(34401),u=a(23921),f=a(85893);function h(e){var t=e.formFields,a=e.mailConf,l=e.setMailConf,s=(0,d.useState)({show:!1}),r=s[0],c=s[1];return(0,f.jsxs)("div",{className:"pos-rel",children:[(0,f.jsx)("div",{className:"d-flx flx-wrp",children:(0,f.jsx)(u.Z,{onChange:function(){return c({show:"attachments"})},checked:"attachments"in a.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,o.__)("Attachments","bitform"),subTitle:(0,o.__)("Add attachments from BitForm to mail pushed to Zoho Mail.","bitform")})}),(0,f.jsxs)(m.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===r.show,close:function(){return c({show:!1})},action:function(){return c({show:!1})},title:(0,o.__)("Select Attachment","bitform"),children:[(0,f.jsx)("div",{className:"btcd-hr mt-2"}),(0,f.jsx)("div",{className:"mt-2",children:(0,o.__)("Select file upload fields","bitform")}),(0,f.jsx)(n.Z,{defaultValue:a.actions.attachments,className:"mt-2 w-9",onChange:function(e){return function(e,t){var n=(0,i.Z)({},a);"attachments"===t&&(""!==e?n.actions.attachments=e:delete n.actions.attachments),l((0,i.Z)({},n))}(e,"attachments")},options:t.filter((function(e){return"file-up"===e.type})).map((function(e){return{label:e.name,value:e.key}}))})]})]})}function p(e){var t=e.formFields,a=e.mailConf,d=e.setMailConf,m=(0,s.sJ)(r.hi),u=(0,s.sJ)(r.uJ),p=function(){var e=[];m.userMail&&Array.isArray(m.userMail)&&e.push.apply(e,m.userMail);var a=[];return t.map((function(e){"email"===e.type&&a.push({label:e.name,value:"${"+e.key+"}"})})),e.push({title:"Form Fields",type:"group",childs:a}),e},_=function(e,t){d((function(a){var l=(0,i.Z)({},a);return l[t]=e,l}))};return(0,f.jsxs)("div",{style:{width:875},children:[(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,o.__)("Type:","bitform")}),(0,f.jsxs)("select",{onChange:function(e){return _(e.target.value,"mailType")},className:"btcd-paper-inp",style:{width:150},value:a.mailType,children:[(0,f.jsx)("option",{value:"",children:(0,o.__)("Select type","bitform")}),(0,f.jsx)("option",{value:"send",children:(0,o.__)("Send Email","bitform")}),(0,f.jsx)("option",{value:"draft",children:(0,o.__)("Save as Draft","bitform")})]})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:"To:"}),(0,f.jsx)(n.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.to,placeholder:(0,o.__)("Add Email Receiver","bitform"),onChange:function(e){return _(e,"to")},options:p(),customValue:!0})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,o.__)("CC:","bitform")}),(0,f.jsx)(n.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.cc,placeholder:(0,o.__)("Add Email CC","bitform"),onChange:function(e){return _(e,"cc")},options:p(),customValue:!0})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,o.__)("BCC:","bitform")}),(0,f.jsx)(n.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.bcc,placeholder:(0,o.__)("Add Email BCC","bitform"),onChange:function(e){return _(e,"bcc")},options:p(),customValue:!0})]}),(0,f.jsxs)("div",{className:"mt-2 flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,o.__)("Subject:","bitform")}),(0,f.jsx)("input",{type:"text",onChange:function(e){return _(e.target.value,"subject")},className:"btcd-paper-inp w-7",placeholder:(0,o.__)("Email Subject Here","bitform"),value:a.subject||""}),(0,f.jsxs)("select",{onChange:function(e){var t=(0,i.Z)({},a);t.subject+=e.target.value,d((0,i.Z)({},t)),e.target.value=""},className:"btcd-paper-inp ml-2",style:{width:150},children:[(0,f.jsx)("option",{value:"",children:(0,o.__)("Add form field","bitform")}),null!==t&&t.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,f.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})]}),(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)("div",{className:"flx flx-between",children:(0,f.jsx)("b",{children:(0,o.__)("Body:","bitform")})}),(0,f.jsx)(c.Z,{id:"body-content",formFields:u,value:a.body||"",onChangeHandler:function(e){d((function(t){return(0,l.ZP)(t,(function(t){t.body=e}))}))}})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("b",{className:"wdt-100",children:(0,o.__)("Actions","bitform")})}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsx)(h,{mailConf:a,setMailConf:d,formFields:t})]})}}}]);