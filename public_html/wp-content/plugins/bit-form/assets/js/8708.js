"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8708],{88708:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(87462),r=s(67294),i=(s(78774),s(5977)),n=s(35637),l=s(35001),o=s(33231),c=s(14383),d=s(85813),p=s(80160),m=s(75257),f=s(71078),u=s(85893);function b(e){var t=e.formID,s=e.dropboxConf,i=e.setDropboxConf,l=e.step,o=e.setStep,c=e.isLoading,d=e.setIsLoading,b=e.isInfo,x=(0,r.useState)(!1),_=x[0],h=x[1],v=(0,r.useState)({apiKey:"",apiSecret:""}),g=v[0],j=v[1],N=function(e){var t=(0,a.Z)({},s),r=(0,a.Z)({},g);r[e.target.name]="",t[e.target.name]=e.target.value,j(r),i(t)};return(0,u.jsxs)("div",{className:"btcd-stp-page",style:(0,a.Z)({},{width:1===l&&900},{height:1===l&&"100%"}),children:[(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,n.__)("Integration Name:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:N,name:"name",value:s.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:b}),(0,u.jsxs)("small",{className:"d-blk mt-3",children:[(0,n.__)("To Get Api Key & Secret, Please Visit","bitform")," ",(0,u.jsx)("a",{className:"btcd-link",rel:"noreferrer",target:"_blank",href:"https://www.dropbox.com/developers/apps/create?_tk=pilot_lp&_ad=ctabtn1&_camp=create",children:(0,n.__)("Dropbox API Console","bitform")})]}),(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,n.__)("Dropbox Api Key:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:N,name:"apiKey",value:s.apiKey,type:"text",placeholder:(0,n.__)("Api Key...","bitform"),disabled:b}),(0,u.jsx)("div",{style:{color:"red"},children:g.apiKey}),(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,n.__)("Dropbox Api Secret:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:N,name:"apiSecret",value:s.apiSecret,type:"text",placeholder:(0,n.__)("Api Secret...","bitform"),disabled:b}),(0,u.jsx)("div",{style:{color:"red"},children:g.apiSecret}),(0,u.jsxs)("small",{className:"d-blk mt-3",children:[(0,n.__)("To Get Access Code, Please Visit","bitform")," ",(0,u.jsx)("span",{className:"btcd-link",style:{cursor:"pointer"},onClick:function(){s.apiKey&&s.apiSecret?window.open("https://www.dropbox.com/oauth2/authorize?client_id="+s.apiKey+"&token_access_type=offline&response_type=code","_blank"):p.ZP.error((0,n.__)("Please enter API key and API secret","bitform"))},"aria-hidden":"true",children:(0,n.__)("Dropbox Access Code","bitform")})]}),(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("b",{children:(0,n.__)("Dropbox Access Code:","bitform")})}),(0,u.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:N,name:"accessCode",value:s.accessCode,type:"text",placeholder:(0,n.__)("Access Code...","bitform"),disabled:b}),(0,u.jsx)("div",{style:{color:"red"},children:g.accessCode}),!b&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{onClick:function(){return(0,f.P_)(s,i,h,d)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:_,children:[_?(0,n.__)("Authorized ✔","bitform"):(0,n.__)("Authorize","bitform"),c&&(0,u.jsx)(m.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("button",{onClick:function(){(0,f.hQ)(t,s,i,d),o(2),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!_,children:[(0,n.__)("Next","bitform"),(0,u.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}var x=s(55363);const _=function(e){var t=e.formFields,s=e.setIntegration,p=e.integrations,m=e.allIntegURL,f=(0,i.k6)(),_=(0,i.UO)().formID,h=(0,r.useState)(!1),v=h[0],g=h[1],j=(0,r.useState)(1),N=j[0],y=j[1],C=(0,r.useState)({show:!1}),w=C[0],Z=C[1],k=(0,r.useState)({name:"Dropbox Integration",type:"Dropbox",apiKey:"",apiSecret:"",accessCode:"",field_map:[{formField:"",dropboxFormField:""}],foldersList:[],actions:{}}),F=k[0],D=k[1];return document.querySelector(".btcd-s-wrp").scrollTop=0,(0,u.jsxs)("div",{children:[(0,u.jsx)(l.Z,{snack:w,setSnackbar:Z}),(0,u.jsx)("div",{className:"txt-center w-9 mt-2",children:(0,u.jsx)(o.Z,{step:3,active:N})}),(0,u.jsx)(b,{formID:_,dropboxConf:F,setDropboxConf:D,step:N,setStep:y,isLoading:v,setIsLoading:g}),(0,u.jsxs)("div",{className:"btcd-stp-page",style:(0,a.Z)({},2===N&&{width:900,height:"100%",overintegrations:"visible"}),children:[(0,u.jsx)(x.Z,{formID:_,formFields:t,dropboxConf:F,setDropboxConf:D,isLoading:v,setIsLoading:g}),(0,u.jsxs)("button",{onClick:function(){return y(3)},disabled:F.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,n.__)("Next","bitform")," "," ",(0,u.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,u.jsx)(d.Z,{step:N,saveConfig:function(){(0,c.Mm)(p,s,m,F,f)}})]})}},71078:(e,t,s)=>{s.d(t,{P_:()=>c,Rx:()=>l,hQ:()=>o});var a=s(87462),r=s(80160),i=s(39492),n=s(35637),l=function(e,t,s,r,i,n,l,o){var c=(0,a.Z)({},t),d=e.target.name;""!==e.target.value?c[d]=e.target.value:delete c[d],s((0,a.Z)({},c))},o=function(e,t,s){var l;void 0===e&&(e=null);var o={formID:e,id:null!=(l=t.id)?l:null,apiKey:t.apiKey,apiSecret:t.apiSecret,tokenDetails:t.tokenDetails},c=(0,i.Z)(o,"bitforms_dropbox_get_all_folders").then((function(e){if(e&&e.success){var r=(0,a.Z)({},t);return e.data.dropboxFoldersList&&(r.foldersList=e.data.dropboxFoldersList,r.tokenDetails=e.data.tokenDetails),s(r),"Dropbox Folders List refreshed successfully"}return"Dropbox Folders List refresh failed. please try again"}));r.ZP.promise(c,{success:function(e){return e},error:(0,n.__)("Error Occurred","bitform"),loading:(0,n.__)("Loading Dropbox Folders List...","bitform")})},c=function(e,t,s,l){if(e.accessCode&&e.apiKey&&e.apiSecret){l(!0);var o={apiKey:e.apiKey,apiSecret:e.apiSecret,accessCode:e.accessCode};(0,i.Z)(o,"bitforms_dropbox_authorization").then((function(i){if(i&&i.success){var o=(0,a.Z)({},e);o.tokenDetails=i.data,t(o),s(!0),r.ZP.success((0,n.__)("Authorized Successfully","bitform"))}else i&&i.data&&i.data.data||!i.success&&"string"===typeof i.data?r.ZP.error(""+(0,n.__)("Authorization failed Cause: ","bitform")+(i.data.data||i.data)+". "+(0,n.__)("please try again","bitform")):r.ZP.error((0,n.__)("Authorization failed. please try again","bitform"));l(!1)}))}else r.ZP.error((0,n.__)("Dropbox ApiKey, ApiSecret & Access Code can't be empty","bitform"))}},55363:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(35637),r=s(87462),i=s(23921),n=s(85893);function l(e){var t,s=e.dropboxConf,l=e.setDropboxConf;return(0,n.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,n.jsx)(i.Z,{checked:(null==(t=s.actions)?void 0:t.delete_from_wp)||!1,onChange:function(e){return function(e,t){var a=(0,r.Z)({},s);"deleteFile"===t&&(e.target.checked?a.actions.delete_from_wp=!0:delete a.actions.delete_from_wp),l((0,r.Z)({},a))}(e,"deleteFile")},className:"mt-4 mr-2",value:"delete_from_wp",title:(0,a.__)("Delete File From Wordpress","bitform"),subTitle:(0,a.__)("Delete file from Wordpress after upload in Dropbox","bitform")})})}var o=s(71078),c=s(52249),d=function(e,t,s){var a=(0,r.Z)({},t);a.field_map.splice(e,0,{}),s((0,r.Z)({},a))};function p(e){var t=e.i,s=e.formFields,i=e.field,l=e.dropboxConf,o=e.setDropboxConf,p=function(e,t){var s=(0,r.Z)({},l);s.field_map[t][e.target.name]=e.target.value,o((0,r.Z)({},s))};return(0,n.jsx)("div",{className:"flx mt-2 mr-1",children:(0,n.jsxs)("div",{className:"pos-rel flx",children:[(0,n.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,n.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:function(e){return p(e,t)},children:[(0,n.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),null==s?void 0:s.filter((function(e){return"file-up"===e.type})).map((function(e){return(0,n.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))]}),(0,n.jsxs)("select",{className:"btcd-paper-inp",name:"dropboxFormField",value:i.dropboxFormField,onChange:function(e){return p(e,t)},children:[(0,n.jsx)("option",{value:"",children:(0,a.__)("Select Folder","bitform")}),(0,c.L1)(l.foldersList,"lower_path","ASC").map((function(e){e.name;var t=e.lower_path;return(0,n.jsx)("option",{value:t,children:t.substring(1).split("/").map((function(e){return e.replace("/",">")})).join(" > ")},t)}))]})]}),(0,n.jsx)("button",{onClick:function(){return d(t,l,o)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,n.jsx)("button",{onClick:function(){return function(e,t,s){var a=(0,r.Z)({},t);a.field_map.length>1&&a.field_map.splice(e,1),s((0,r.Z)({},a))}(t,l,o)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,n.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})})}function m(e){var t=e.formID,s=e.formFields,r=e.dropboxConf,i=e.setDropboxConf;e.isLoading,e.setIsLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mt-5",children:[(0,n.jsx)("b",{className:"wdt-100",children:(0,a.__)("Field Map","bitform")}),(0,n.jsx)("button",{onClick:function(){return(0,o.hQ)(t,r,i)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Fetch All Dropbox Folders","bitform")+"'"},type:"button",children:"↻"})]}),(0,n.jsx)("div",{className:"btcd-hr mt-1"}),(0,n.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,n.jsx)("div",{className:"txt-dp",children:(0,n.jsx)("b",{children:(0,a.__)("File Input","bitform")})}),(0,n.jsx)("div",{className:"txt-dp",children:(0,n.jsx)("b",{children:(0,a.__)("Dropbox Folder","bitform")})})]}),null==r?void 0:r.field_map.map((function(e,t){return(0,n.jsx)(p,{i:t,field:e,formFields:s,dropboxConf:r,setDropboxConf:i},"rp-m-"+(t+9))})),(0,n.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,n.jsx)("button",{onClick:function(){return d(r.field_map.length,r,i)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("b",{className:"wdt-100",children:(0,a.__)("Actions","bitform")})}),(0,n.jsx)("div",{className:"btcd-hr mt-1"}),(0,n.jsx)(l,{dropboxConf:r,setDropboxConf:i})]})}},14383:(e,t,s)=>{s.d(t,{FP:()=>n,Mm:()=>r,T5:()=>l,WK:()=>i,mG:()=>c,wX:()=>o});var a=s(87462),r=(s(35637),s(39492),function(e,t,s,r,i,n,l){var o=[].concat(e);if(l)o[n]=(0,a.Z)({},e[n],r),o.push({editItegration:!0}),t([].concat(o)),i.push(s);else{var c=[].concat(o);c.push(r),c.push({newItegration:!0}),t(c),i.push(s)}}),i=function(e){var t={},s=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");s&&s.forEach((function(e){var s=e.split("=");s[1]&&(t[s[0]]=s[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},n=function(e,t,s,r,i){var n=(0,a.Z)({},t);i?r?n.relatedlists[i-1].upload_field_map.splice(e,0,{}):n.relatedlists[i-1].field_map.splice(e,0,{}):r?n.upload_field_map.splice(e,0,{}):n.field_map.splice(e,0,{}),s((0,a.Z)({},n))},l=function(e,t,s,r,i){var n=(0,a.Z)({},t);i?r?n.relatedlists[i-1].upload_field_map.length>1&&n.relatedlists[i-1].upload_field_map.splice(e,1):n.relatedlists[i-1].field_map.length>1&&n.relatedlists[i-1].field_map.splice(e,1):r?n.upload_field_map.length>1&&n.upload_field_map.splice(e,1):n.field_map.length>1&&n.field_map.splice(e,1),s((0,a.Z)({},n))},o=function(e,t,s,r,i,n){var l=(0,a.Z)({},s);n?i?l.relatedlists[n-1].upload_field_map[t][e.target.name]=e.target.value:l.relatedlists[n-1].field_map[t][e.target.name]=e.target.value:i?l.upload_field_map[t][e.target.name]=e.target.value:l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n?l.relatedlists[n-1].field_map[t].customValue="":l.field_map[t].customValue=""),r((0,a.Z)({},l))},c=function(e,t,s,r,i){var n=(0,a.Z)({},s);i?n.relatedlists[i-1].field_map[t].customValue=e.target.value:n.field_map[t].customValue=e.target.value,r((0,a.Z)({},n))}},85813:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(35637),r=s(85893);function i(e){var t=e.step,s=e.saveConfig,i=e.edit,n=e.disabled;return i?(0,r.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,r.jsx)("button",{onClick:s,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,a.__)("Update","bitform")})}):(0,r.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,r.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,r.jsxs)("button",{onClick:s,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},33231:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(67294),r=s(85893);const i=function(e){var t=e.step,s=e.active,i=e.className;return(0,r.jsx)("div",{className:"d-in-b "+i,children:(0,r.jsxs)("div",{className:"flx flx-center",children:[Array(s).fill(0).map((function(e,t){return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),s-1!==t&&(0,r.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-s!==0&&(0,r.jsx)("div",{className:"btcd-stp-line"}),Array(t-s).fill(0).map((function(e,i){return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:i+s+1}),t-s-1!==i&&(0,r.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(i+23))}))]})})}}}]);