"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[1098],{81098:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(87462),i=a(67294),n=a(41238),s=a(35637),r=a(75257),u=a(99095),d=a(85893);function o(e){e.formID;var t=e.acumbamailConf,a=e.setAcumbamailConf,o=e.step,c=e.setstep,f=e.isLoading,m=e.setIsLoading,_=e.setSnackbar,b=(e.redirectLocation,e.isInfo),h=(0,i.useState)(!1),p=h[0],g=h[1],v=(0,i.useState)({dataCenter:"",clientId:""}),k=v[0],x=v[1],Z=function(e){var i=(0,l.Z)({},t),n=(0,l.Z)({},k);n[e.target.name]="",i[e.target.name]=e.target.value,x(n),a(i)};return(0,d.jsxs)("div",{className:"btcd-stp-page",style:(0,l.Z)({},{width:1===o&&900},{height:1===o&&"auto"}),children:[(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Integration Name:","bit-integrations")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:Z,name:"name",value:t.name,type:"text",placeholder:(0,s.__)("Integration Name...","bitform"),disabled:b}),(0,d.jsxs)("small",{className:"d-blk mt-3",children:[(0,s.__)("To Get Auth token, Please Visit","bitform")," ",(0,d.jsx)("a",{className:"btcd-link",href:"https://acumbamail.com/en/apidoc/",target:"_blank",rel:"noreferrer",children:(0,s.__)("Acumbamail documentation","bitform")})]}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Auth Token:","bit-integrations")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:Z,name:"auth_token",value:t.auth_token,type:"text",placeholder:(0,s.__)("Auth Token...","bitform"),disabled:b}),(0,d.jsx)("div",{style:{color:"red",fontSize:"15px"},children:k.auth_token}),!b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:function(){return(0,u.P_)(t,a,x,g,m,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:p||f,children:[p?(0,s.__)("Authorized ✔","bitform"):(0,s.__)("Authorize","bitform"),f&&(0,d.jsx)(r.Z,{size:20,clr:"#022217",className:"ml-2"})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("button",{onClick:function(){setTimeout((function(){document.getElementById("btcd-settings-wrp").scrollTop=0}),300),c(2),(0,u.GF)(t,a,m,_)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!p,children:[(0,s.__)("Next","bitform"),(0,d.jsx)(n.Z,{className:"ml-1 rev-icn"})]})]})]})}},99095:(e,t,a)=>{a.d(t,{GF:()=>d,GX:()=>u,P_:()=>o,Pd:()=>c,Rx:()=>r});var l=a(87462),i=a(80160),n=a(39492),s=(a(52249),a(35637)),r=function(e,t,a,i,n,s){var r,d,o=(0,l.Z)({},t),c=e.target.name;if(""!==e.target.value?o[c]=e.target.value:delete o[c],o[e.target.name]=e.target.value,"listId"===e.target.name)o.field_map=[{formField:"",acumbamailFormField:"email"}],!o.listId||null!=(r=o.default)&&null!=(d=r.allFields)&&d[o.listId]||u(s,o,a,i,n);a((0,l.Z)({},o))},u=function(e,t,a,r,u){var d=t.listId;if(d){r(!0);var o={auth_token:t.auth_token,list_id:d};(0,n.Z)(o,"bitforms_acumbamail_refresh_fields").then((function(e){if(e&&e.success){var n,u,o=(0,l.Z)({},t);if(e.data)return null!=(n=o.default)&&n.allFields||(o.default.allFields={}),null!=(u=o.default.allFields)&&u[d]||(o.default.allFields[d]={}),o.default.allFields[d].fields=e.data,o.default.allFields[d].required=["email"],a((0,l.Z)({},o)),r(!1),void i.ZP.success((0,s.__)("All list field fetched successfully","bitform"));r(!1),i.ZP.error((0,s.__)("Failed to fetch list fields","bitform"))}})).catch((function(){return r(!1)}))}},d=function(e,t,a,r){a(!0);var u={auth_token:e.auth_token};(0,n.Z)(u,"bitforms_acumbamail_fetch_all_list").then((function(n){if(n&&n.success){var r=(0,l.Z)({},e);return r.default||(r.default={}),n.data&&(r.default.allLists=n.data),t((0,l.Z)({},r)),a(!1),void i.ZP.success((0,s.__)("Lists fetched successfully","bitform"))}a(!1),i.ZP.error((0,s.__)("Lists fetch failed. please try again","bitform"))})).catch((function(){return a(!1)}))},o=function(e,t,a,r,u,d){if(e.auth_token){a({}),u(!0);var o={auth_token:e.auth_token};(0,n.Z)(o,"bitforms_acumbamail_authorization_and_fetch_subscriber_list").then((function(a){if(a&&a.success){var n=(0,l.Z)({},e);return t(n),r(!0),u(!1),void i.ZP.success((0,s.__)("Authorized successfully","bitform"))}u(!1),i.ZP.error((0,s.__)("Authorized failed","bitform"))}))}else a({auth_token:e.auth_token?"":(0,s.__)("Api Key can't be empty","bitform")})},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var a,l,i;return!t.formField&&t.acumbamailFormField&&-1!==(null==e||null==(a=e.default)||null==(l=a.allFields)||null==(i=l[e.listId])?void 0:i.required.indexOf(t.acumbamailFormField))})):[]).length>0)}}}]);